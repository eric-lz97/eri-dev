<!DOCTYPE html><html lang="en-US">
<!-- Mirrored from bholmes.dev/blog/how-to-revert-your-git-commits-without-panicking/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 16 Mar 2022 05:58:30 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head><link rel="stylesheet" href="__styles.html"><link rel="stylesheet" href=../../_layouts/__styles.css><link rel="stylesheet" href=../../_layouts/blog-post/__styles.css><title>How to revert your git commits without panicking</title><link rel="preload" href="https://use.typekit.net/liz3dnm.css" as="style"/><link rel="preload" href="../../assets/fonts/Atkinson/Atkinson-Hyperlegible-Regular.woff2" as="font" crossorigin="anonymous"/><link rel="preload" href="../../assets/fonts/Atkinson/Atkinson-Hyperlegible-Bold.woff2" as="font" crossorigin="anonymous"/><link rel="preload" href="../../assets/fonts/Atkinson/Atkinson-Hyperlegible-Italic.woff2" as="font" crossorigin="anonymous"/><link rel="preload" href="../../assets/fonts/Atkinson/Atkinson-Hyperlegible-BoldItalic.woff2" as="font" crossorigin="anonymous"/><link rel="stylesheet" href="https://use.typekit.net/liz3dnm.css"/><link rel="icon" type="img/jpg" href="../../assets/favicon.jpg"/><link rel="canonical" href="index.html"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><!-- TODO: automatically generate these at buildtime--><link rel="modulepreload" href="__client.html"/><link rel="modulepreload" href="__data.html"/><link rel="modulepreload" href="../../_layouts/__client.mjs"/><link rel="modulepreload" href="../../_layouts/__data.mjs"/><link rel="preload" as="fetch" href="../../index-2.html"/><link rel="preload" as="fetch" href="../../work/index.html"/><link rel="preload" as="fetch" href="../../contact/index.html"/><meta name="author" content="Ben Holmes"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@bholmesdev"/><meta name="twitter:creator" content="@bholmesdev"/><meta name="description" content="When your code turns to ðŸ’© but you've already committed, how do you go back?"/><meta property="og:url" content="index.html"/><meta property="og:image" content="../../assets/og-images/me.jpg"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:site_name" content="Ben Holmes"/><meta property="og:title" content="How to revert your git commits without panicking"/><meta property="og:description" content="When your code turns to ðŸ’© but you've already committed, how do you go back?"/><!-- Analytics--><script async="async" defer="defer" data-domain="bholmes.dev" src="https://stats.bholmes.dev/js/index.js"></script></head><body><div id="loading-spinner" aria-label="loading"><div class="loading-spinner__graphic"><div class="loading-spinner__graphic--dash"></div><div class="loading-spinner__graphic--dash"></div><div class="loading-spinner__graphic--dash"></div></div></div><nav id="site-navigation"><div class="jump-to-section__container"><button id="jump-to-section__toggle" aria-label="Reveal table of contents"><span>0</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M128 192l128 128 128-128z"/></svg></button><div class="jump-to-section__label-container"><p id="jump-to-section__label"></p></div><ul id="jump-to-section__links"></ul></div><div class="primary-nav__container"><ul id="primary-nav__links"><li><a href="../../index.html">Ben</a></li><li><a class="active" href="../index.html">Blog</a></li><li><a href="../../work/index-2.html">Works</a></li><li><a href="../../contact/index-2.html">Contact</a></li></ul><button id="primary-nav__toggle" aria-label="Reveal navigation links"><div class="stripe-top"></div><div class="stripe-middle"></div><div class="stripe-bottom"></div></button></div></nav><div id="loading-spinner" aria-label="loading"><div class="loading-spinner__graphic"><div class="loading-spinner__graphic--dash"></div><div class="loading-spinner__graphic--dash"></div><div class="loading-spinner__graphic--dash"></div></div></div><div data-page="_layouts/blog-post"><main><article data-page="blog/how-to-revert-your-git-commits-without-panicking"><header><h1>How to revert your git commits without panicking</h1><p class="details"><span><strong>4</strong> minute read</span><span class="spacer">â€¢</span><span>Last updated <time pubdate="pubdate" datetime="2019-06-13T02:23:26.903Z">June 13, 2019</time></span></p></header><div><h2 id="link-step-1-take-deep-breaths">Step 1: Take deep breaths</h2>
<p>The best way to overcome your escalating fear that your codebase / world is collapsing around you is deep breathing. Before frantically flying to the keyboard, just go <em>in through the nose... and out through the mouth.</em></p>
<p><picture><source type="image/webp" srcset="/assets/md-images/9ce97487-600.webp 600w" sizes="(min-width: 800px) 720px, 100vw"><img alt="Person meditating in front of an orange sunset" loading="lazy" decoding="async" src="../../assets/md-images/9ce97487-600.jpg" width="600" height="394"></picture></p>
<h2 id="link-step-2-look-over-the-commit-log">Step 2: Look over the commit log</h2>
<p>Before doing anything you might regret, it's best to look through all recent commits to pinpoint where you're reverting to. The cleanest way to do so is using:</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">git</span> log --oneline
</code></pre>
<p><picture><source type="image/webp" srcset="/assets/md-images/a350d617-600.webp 600w, /assets/md-images/a350d617-1000.webp 1000w, /assets/md-images/a350d617-1400.webp 1400w" sizes="(min-width: 800px) 720px, 100vw"><source type="image/jpeg" srcset="/assets/md-images/a350d617-600.jpeg 600w, /assets/md-images/a350d617-1000.jpeg 1000w, /assets/md-images/a350d617-1400.jpeg 1400w" sizes="(min-width: 800px) 720px, 100vw"><img alt="git log of commit history" loading="lazy" decoding="async" src="../../assets/md-images/a350d617-600.jpg" width="1400" height="919"></picture></p>
<p>This will show all of the commit history for your branch, starting with the most recent. It also shows branch points to see the history of everything that got merged.</p>
<p>Also notice the alphanumeric strings to the left of each commit. These are hashes which uniquely identify a given commit. Once you find the inflection point for your code explosion, copy the hash for that commit and move on to the next step.</p>
<p><em><strong>Note</strong>: You can exit this log by hitting the &quot;q&quot; key. This is very <a href="https://vim.dev/" target="_blank" rel="noreferrer">vim</a> so I don't blame you if you got stuck here</em> ðŸ˜›</p>
<h2 id="link-step-3-diff-against-the-most-recent-commit">Step 3: Diff against the most recent commit</h2>
<p>Checking for differences against your revert point is a great way to verify what changes you're about to make. To do so, use the copied hash and run the following command:</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">git</span> <span class="token function">diff</span> HEAD COPIED_HASH^
</code></pre>
<p><picture><source type="image/webp" srcset="/assets/md-images/6aaca9ff-600.webp 600w, /assets/md-images/6aaca9ff-1000.webp 1000w, /assets/md-images/6aaca9ff-1400.webp 1400w" sizes="(min-width: 800px) 720px, 100vw"><source type="image/jpeg" srcset="/assets/md-images/6aaca9ff-600.jpeg 600w, /assets/md-images/6aaca9ff-1000.jpeg 1000w, /assets/md-images/6aaca9ff-1400.jpeg 1400w" sizes="(min-width: 800px) 720px, 100vw"><img alt="git diff sample output" loading="lazy" decoding="async" src="../../assets/md-images/6aaca9ff-600.jpg" width="1400" height="951"></picture></p>
<p>Let's break this output down. First, we see a log of all binary files changed, with paths listed as <code>a/file_path</code> and <code>b/file_path</code>. These files are often editor / build specific files (as in <code>.vscode</code> or <code>.circleci</code> directories) and image files. In this case, the the resolution of a few images were updated.</p>
<p>Next, we see a line-by-line breakdown of lines added and removed from each modified file. Note this is from the perspective of changing <em>from</em> our most recent commit <em>to</em> the commit we're reverting to. So, everything in green is what will be added <em>after</em> reverting, and everything in red will be removed.</p>
<p>Also note the <code>^</code> at the end there. This makes sure we diff down to the ancestor of that commit hash. Otherwise, the diff will stop one commit early.</p>
<p>If you scroll through this and everything looks good, it's time to obliterate those commits!</p>
<h2 id="link-step-4-option-1-run-a-commit-revert-recommended">Step 4 Option 1: Run a commit revert (recommended)</h2>
<p>The first option is the most obvious one: run the <code>revert</code> command onto the commit hash we're reverting to. This is very straightforward:</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">git</span> revert COPIED_COMMIT_HASH<span class="token punctuation">..</span>
</code></pre>
<p>Note that doing so will create a new commit meant to revert all changes made down to the commit specified. This works well since you should be able to push your changes and have a clean change log as intended.</p>
<p>Worth warning that this will open a confirmation file in vi (assuming you're using the default git editor) for <strong>each</strong> commit being reverted. If everything looks as expected, type &quot;:wq&quot; to confirm the reverts.</p>
<p>You can also add the <code>--no-commit</code> flag to stage each revert without actually creating a revert commit. This is useful when reverting several commits deep since it allows you to submit one large revert commit at the end. Otherwise, you would end up submitting a revert commit for each one individually.</p>
<p>Still, you might want to change your commit history entirely so it appears those nasty commits were never there. For that, there is a second option...</p>
<h2 id="link-option-2-rebase-and-drop-commits">Option 2: Rebase and drop commits</h2>
<p><em><strong>Note</strong>: Read the disclaimer at the end of this section before going with this option.</em></p>
<p>Rather than making a revert commit, you can modify the commit history directly using a rebase. To start the process, type the following:</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">git</span> rebase -i COPIED_COMMIT_HASH^
</code></pre>
<p><picture><source type="image/webp" srcset="/assets/md-images/d799d917-600.webp 600w, /assets/md-images/d799d917-1000.webp 1000w, /assets/md-images/d799d917-1400.webp 1400w" sizes="(min-width: 800px) 720px, 100vw"><source type="image/jpeg" srcset="/assets/md-images/d799d917-600.jpeg 600w, /assets/md-images/d799d917-1000.jpeg 1000w, /assets/md-images/d799d917-1400.jpeg 1400w" sizes="(min-width: 800px) 720px, 100vw"><img alt="git interactive rebase sample output" loading="lazy" decoding="async" src="../../assets/md-images/d799d917-600.jpg" width="1400" height="1000"></picture></p>
<p>Notice the <code>-i</code> flag here. This is a shorthand for <code>--interactive</code>, which allows you to edit each commit individually from the head to our specified commit hash.</p>
<p>It's simple from here to drop all of our commits. The instructions are actually visible right there in the comments, but as a TLDR: Replace every &quot;pick&quot; with a &quot;drop&quot; for all commits listed.</p>
<p>...If you're stuck wondering why your delete key isn't working, that's because git uses <a href="https://vim.dev/" target="_blank" rel="noreferrer">vi</a> as the default editor. You can go <a href="https://www.kevinkuszyk.com/2016/03/08/git-tips-2-change-editor-for-interactive-git-rebase/" target="_blank" rel="noreferrer">here</a> to change over to your favorite editor for this process, but if you're fine sticking with vi, it shouldn't be too difficult.</p>
<ul>
<li>To start editing, hit the &quot;i&quot; key and use the arrow keys to move your cursor around</li>
<li>Move your cursor over to each &quot;pick&quot; statement, delete, and replace it with &quot;drop&quot;</li>
<li>Once all the picks are replaced, hit &quot;esc&quot;</li>
<li>To confirm the rebase, type &quot;:wq&quot;. This will save the rebase file you just edited</li>
</ul>
<p>If you want to abort at any time, delete all the lines listed above the commented section (those starting with &quot;#&quot;) to force the rebase to error out. If you're using vi, just mash &quot;d&quot; repeatedly until the lines are gone ðŸ™ƒ</p>
<p>If your terminal window closes or something else happens, the rebase will hang uncompleted. To abort the rebase and start over, enter the command <code>git rebase --abort</code>.</p>
<p>If all goes well, you will have officially changed history!</p>
<p><img src="https://media.giphy.com/media/M6VxE9CEHMDtK/giphy.gif" alt="Applicable Doctor Who quote: wibbly wobbly timey wimey stuff" loading="lazy"  /></p>
<h3 id="link-disclaimer">Disclaimer</h3>
<p>Modifying git history can be a problem if you have already pushed now reverted commits to the remote branch. After reverting, it will appear your branch is behind the remote, so you cannot push directly anymore. In this case, you will have to run <code>git push --force-with-lease</code>. This flag will force your history onto the remote by removing those dropped commits. <code>with-lease</code> acts as an error check to ensure the rest of your commits are in line with the remote's.</p>
<p>You may have heard using <code>--force</code> on a push isn't best practice since it involves rewriting commit history on the remote. This can be a problem for others working off of the same branch, since their history will no longer line up with the remote's. <a href="https://stackoverflow.com/questions/9813816/git-pull-after-forced-update" target="_blank" rel="noreferrer">There are ways to fix this</a>, but make sure others are aware of your force push before they run into trouble!</p>
<h2 id="link-wrapping-up">Wrapping up</h2>
<p>Hopefully by the end of this you've gotten your branch back on track! Mainly, always make super sure of what commands you're about to run when modifying commits, especially when editing git history directly. This can be a very daunting task for beginners and experts alike, so making sure of the diff and viewing the commit log are a must!</p>
<p>I actually wrote this article after having to go through the same process for my job, wanting to give my hastily written notes some clarity. Hope this helps others stuck in the same boat ðŸ˜Š</p>
</div><hr/><footer><p>Learn a little something? <strong><a href="https://twitter.com/intent/tweet?text=Woah,%20I%20learned%20so%20much%20from%20this!%20%22How%20to%20revert%20your%20git%20commits%20without%20panicking%22%20by%20@bholmesdev%20https://bholmes.dev/blog/how-to-revert-your-git-commits-without-panicking/" target="_blank" rel="noreferrer">Share this post</a> on Twitter!</strong></p><section class="about-the-author"><img src="../../assets/images/me.jpg" alt="Hand drawn portrait of Ben Holmes"/><div><address><a rel="author" href="../../index.html">Ben Holmes </a></address>is a web developer + UI designer by trade from Charleston SC. He's been tinkering with JavaScript and CSS since 2014, and has lead a <a href="https://hack4impact.org/dev-bootcamp">full stack bootcamp curriculum</a> used by universities across the country. Now, he's working fulltime at Peloton and teaching the world a bit of web whimsy in his spare time.</div></section></footer></article></main><footer><div class="content"><div class="newsletter"><h2>Woah, there's a newsletter too!</h2><form action="https://tinyletter.com/bholmesdev" method="post" target="_blank"><label for="email">Email</label><input id="email" type="email" name="email" placeholder="10xengineer@genius.club" required="required"/><p class="newsletter__never-spam">Don't worry, I won't spam you</p><button class="cta-link" type="submit">Yes please, more content<svg xmlns="http://www.w3.org/2000/svg" fill="#5f4b32" width="34" height="34" viewBox="0 0 512 512"><path d="M48 270.9l118.9 44.6L181.7 464 256 360l104 104L464 48 48 270.9zm294.9 126L260 313.4 374.9 152 193.6 289.8 124.9 265l291-156.2-73 288.1z"/></svg></svg></button></form></div><div class="socials"><div class="socials__links"><a href="https://dev.to/bholmesdev" target="_blank" rel="noreferrer" aria-label="Ben's DEV.to blog"><svg xmlns="http://www.w3.org/2000/svg" fill="#5f4b32" width="34" height="34" viewBox="0 0 34 34"><path d="M18.119,22.38a1.48,1.48,0,0,0-.881-.33H15.917v7.929h1.321a1.449,1.449,0,0,0,.881-.33,1.172,1.172,0,0,0,.44-.991V23.371a1.172,1.172,0,0,0-.44-.991ZM39.669,9H12.331A3.332,3.332,0,0,0,9,12.324V39.676A3.332,3.332,0,0,0,12.331,43H39.669A3.332,3.332,0,0,0,43,39.676V12.324A3.332,3.332,0,0,0,39.669,9ZM20.7,28.67a3.466,3.466,0,0,1-3.668,3.586H13.508V19.7H17.1a3.462,3.462,0,0,1,3.593,3.586L20.7,28.67Zm7.647-6.731H24.3v2.918h2.471V27.1H24.3v2.918h4.047v2.244H23.626a1.531,1.531,0,0,1-1.569-1.494v-9.5A1.531,1.531,0,0,1,23.55,19.7h4.8v2.237Zm7.86,8.755c-1,2.333-2.794,1.872-3.6,0L29.682,19.7h2.471l2.257,8.631L36.654,19.7h2.471L36.207,30.694Z" transform="translate(-9 -9)"/></svg></a><a href="https://twitter.com/bholmesdev" target="_blank" rel="noreferrer" aria-label="Ben's Twitter"><svg xmlns="http://www.w3.org/2000/svg" fill="#5f4b32" width="34" height="34" viewBox="0 0 34 34"><path d="M55.383,67.4a14.634,14.634,0,0,1-4.157,1.144,7.264,7.264,0,0,0,3.185-4.008,14.384,14.384,0,0,1-4.6,1.757,7.237,7.237,0,0,0-12.524,4.95,7.087,7.087,0,0,0,.187,1.652,20.514,20.514,0,0,1-14.924-7.574A7.253,7.253,0,0,0,24.8,75a7.07,7.07,0,0,1-3.29-.9v.09a7.245,7.245,0,0,0,5.809,7.1,7.287,7.287,0,0,1-1.907.254,6.829,6.829,0,0,1-1.361-.135,7.25,7.25,0,0,0,6.766,5.032,14.513,14.513,0,0,1-8.995,3.1,14.673,14.673,0,0,1-1.727-.1,20.234,20.234,0,0,0,11.081,3.275c13.331,0,20.613-11.043,20.613-20.621,0-.314-.007-.628-.022-.935A14.736,14.736,0,0,0,55.383,67.4Z" transform="translate(-20.1 -64)"/></svg></a><a href="https://github.com/holben888" target="_blank" rel="noreferrer" aria-label="Ben's GitHub"><svg xmlns="http://www.w3.org/2000/svg" fill="#5f4b32" width="34" height="34" viewBox="0 0 34 34"><path d="M10,115.987a18.6,18.6,0,0,0,.434,4.181,12.443,12.443,0,0,0,1.2,3.251,9.207,9.207,0,0,0,1.943,2.429,11.2,11.2,0,0,0,2.56,1.714,15.1,15.1,0,0,0,3.15,1.079,26,26,0,0,0,3.615.583q1.847.167,4.056.167,2.227,0,4.073-.167a26.227,26.227,0,0,0,3.626-.583,15.681,15.681,0,0,0,3.168-1.079,11.191,11.191,0,0,0,2.578-1.714,9.284,9.284,0,0,0,1.964-2.429,12.2,12.2,0,0,0,1.2-3.251A18.6,18.6,0,0,0,44,115.987a10.2,10.2,0,0,0-2.758-7.133,8.923,8.923,0,0,0,.274-.906,12.4,12.4,0,0,0,.232-1.447,8.1,8.1,0,0,0-.083-2.168,11.516,11.516,0,0,0-.708-2.512l-.25-.049a3.352,3.352,0,0,0-.874.024,9.708,9.708,0,0,0-1.412.3,12.073,12.073,0,0,0-2.078.864,24.135,24.135,0,0,0-2.685,1.6,26.284,26.284,0,0,0-6.668-.666,26.208,26.208,0,0,0-6.651.666,22.6,22.6,0,0,0-2.7-1.6,13.381,13.381,0,0,0-2.054-.864,8.05,8.05,0,0,0-1.429-.291,4.676,4.676,0,0,0-.84-.042,1.455,1.455,0,0,0-.274.059,11.462,11.462,0,0,0-.708,2.512,8.1,8.1,0,0,0-.083,2.168,12.664,12.664,0,0,0,.232,1.447,8.922,8.922,0,0,0,.274.906A10.223,10.223,0,0,0,10,115.987Zm4.174,4.174a5.879,5.879,0,0,1,2.179-4.389,4.334,4.334,0,0,1,1.513-.906,6.575,6.575,0,0,1,1.953-.347c.725-.028,1.422-.021,2.085.017s1.485.09,2.46.156,1.818.1,2.526.1,1.551-.031,2.529-.1,1.8-.118,2.46-.156,1.36-.045,2.085-.017a6.687,6.687,0,0,1,1.953.347,4.366,4.366,0,0,1,1.513.906,5.814,5.814,0,0,1,2.179,4.389,8.215,8.215,0,0,1-.357,2.536,6.367,6.367,0,0,1-.912,1.853,4.535,4.535,0,0,1-1.547,1.273,10.782,10.782,0,0,1-1.929.8,13.909,13.909,0,0,1-2.411.441c-.982.1-1.856.17-2.626.191s-1.749.035-2.935.035-2.165-.01-2.935-.035-1.644-.087-2.626-.191a13.648,13.648,0,0,1-2.411-.441,11.153,11.153,0,0,1-1.929-.8,4.535,4.535,0,0,1-1.547-1.273,6.414,6.414,0,0,1-.916-1.853A8.438,8.438,0,0,1,14.174,120.161Zm17.076-.333c0,1.759.951,3.188,2.127,3.188s2.127-1.426,2.127-3.188-.951-3.188-2.127-3.188S31.25,118.066,31.25,119.828Zm-12.75,0c0,1.759.951,3.188,2.127,3.188s2.127-1.426,2.127-3.188-.951-3.188-2.127-3.188S18.5,118.066,18.5,119.828Z" transform="translate(-10 -101.754)"/></svg></a></div><p>Follow along with <strong>Ben</strong> for the fun, for the whimsy, and for the love of building websites â™¥ </p></div></div></footer></div></body>
          <script src="../../__main.mjs" defer></script>
          
          
<!-- Mirrored from bholmes.dev/blog/how-to-revert-your-git-commits-without-panicking/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 16 Mar 2022 05:58:37 GMT -->
</html>