<!DOCTYPE html><html lang="en-US">
<!-- Mirrored from bholmes.dev/blog/a-shiny-on-hover-effect-that-follows-your-mouse-css/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 16 Mar 2022 05:56:28 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head><link rel="stylesheet" href="__styles.html"><link rel="stylesheet" href=../../_layouts/__styles.css><link rel="stylesheet" href=../../_layouts/blog-post/__styles.css><title>A shiny-on-hover effect that follows your mouse (CSS) ‚ú®</title><link rel="preload" href="https://use.typekit.net/liz3dnm.css" as="style"/><link rel="preload" href="../../assets/fonts/Atkinson/Atkinson-Hyperlegible-Regular.woff2" as="font" crossorigin="anonymous"/><link rel="preload" href="../../assets/fonts/Atkinson/Atkinson-Hyperlegible-Bold.woff2" as="font" crossorigin="anonymous"/><link rel="preload" href="../../assets/fonts/Atkinson/Atkinson-Hyperlegible-Italic.woff2" as="font" crossorigin="anonymous"/><link rel="preload" href="../../assets/fonts/Atkinson/Atkinson-Hyperlegible-BoldItalic.woff2" as="font" crossorigin="anonymous"/><link rel="stylesheet" href="https://use.typekit.net/liz3dnm.css"/><link rel="icon" type="img/jpg" href="../../assets/favicon.jpg"/><link rel="canonical" href="index.html"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><!-- TODO: automatically generate these at buildtime--><link rel="modulepreload" href="__client.html"/><link rel="modulepreload" href="__data.html"/><link rel="modulepreload" href="../../_layouts/__client.mjs"/><link rel="modulepreload" href="../../_layouts/__data.mjs"/><link rel="preload" as="fetch" href="../../index-2.html"/><link rel="preload" as="fetch" href="../../work/index.html"/><link rel="preload" as="fetch" href="../../contact/index.html"/><meta name="author" content="Ben Holmes"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@bholmesdev"/><meta name="twitter:creator" content="@bholmesdev"/><meta name="description" content="Using CSS variables + any frontend framework to add a metallic shine to your UI"/><meta property="og:url" content="index.html"/><meta property="og:image" content="https://raw.githubusercontent.com/Holben888/personal-blog/main/css-shiny-buttons/thumbnail.png"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:site_name" content="Ben Holmes"/><meta property="og:title" content="A shiny-on-hover effect that follows your mouse (CSS) ‚ú®"/><meta property="og:description" content="Using CSS variables + any frontend framework to add a metallic shine to your UI"/><!-- Analytics--><script async="async" defer="defer" data-domain="bholmes.dev" src="https://stats.bholmes.dev/js/index.js"></script></head><body><div id="loading-spinner" aria-label="loading"><div class="loading-spinner__graphic"><div class="loading-spinner__graphic--dash"></div><div class="loading-spinner__graphic--dash"></div><div class="loading-spinner__graphic--dash"></div></div></div><nav id="site-navigation"><div class="jump-to-section__container"><button id="jump-to-section__toggle" aria-label="Reveal table of contents"><span>0</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M128 192l128 128 128-128z"/></svg></button><div class="jump-to-section__label-container"><p id="jump-to-section__label"></p></div><ul id="jump-to-section__links"></ul></div><div class="primary-nav__container"><ul id="primary-nav__links"><li><a href="../../index.html">Ben</a></li><li><a class="active" href="../index.html">Blog</a></li><li><a href="../../work/index-2.html">Works</a></li><li><a href="../../contact/index-2.html">Contact</a></li></ul><button id="primary-nav__toggle" aria-label="Reveal navigation links"><div class="stripe-top"></div><div class="stripe-middle"></div><div class="stripe-bottom"></div></button></div></nav><div id="loading-spinner" aria-label="loading"><div class="loading-spinner__graphic"><div class="loading-spinner__graphic--dash"></div><div class="loading-spinner__graphic--dash"></div><div class="loading-spinner__graphic--dash"></div></div></div><div data-page="_layouts/blog-post"><main><article data-page="blog/a-shiny-on-hover-effect-that-follows-your-mouse-css"><header><picture><source type="image/webp" srcset="/assets/pug-images/be5243b9-600.webp 600w, /assets/pug-images/be5243b9-800.webp 800w, /assets/pug-images/be5243b9-1400.webp 1400w" sizes="(min-width: 800px) 720px, 100vw"><source type="image/jpeg" srcset="/assets/pug-images/be5243b9-600.jpeg 600w, /assets/pug-images/be5243b9-800.jpeg 800w, /assets/pug-images/be5243b9-1400.jpeg 1400w" sizes="(min-width: 800px) 720px, 100vw"><img alt="Using CSS variables + any frontend framework to add a metallic shine to your UI" loading="lazy" decoding="async" widths="800,1000,1400" src="../../assets/pug-images/be5243b9-600.jpg" width="1400" height="587"></picture><h1>A shiny-on-hover effect that follows your mouse (CSS) ‚ú®</h1><p class="details"><span><strong>8</strong> minute read</span><span class="spacer">‚Ä¢</span><span>Last updated <time pubdate="pubdate" datetime="2021-01-28T17:40:13.392Z">January 28, 2021</time></span></p></header><div><p>Hover states are probably the most fun a developer can have when a designer isn't looking. You've seen the basics at this point; fade-ins, growing and shrinking, color shifts, <a href="https://www.joshwcomeau.com/react/rainbow-button/" target="_blank" rel="noreferrer">animated rainbow gradients</a>, etc etc etc.</p>
<p>But there was one animation that inspired me recently (props <a href="https://www.youtube.com/watch?v=VBkGe1TxEuI&amp;t=225s" target="_blank" rel="noreferrer">to Keyframers</a> for shouting it out!)</p>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">Has anyone done this directional lighting cursor interaction with CSS? <a href="https://t.co/zLL7Sk6kW5">pic.twitter.com/zLL7Sk6kW5</a></p>&mdash; Jed Bridges (@JedBridges) <a href="https://twitter.com/JedBridges/status/1278384065087893505?ref_src=twsrc%5Etfw">July 1, 2020</a></blockquote>
<p>This isn't some &quot;static&quot; hover state that always looks the same. It actually <em>tracks your mouse moment</em> to make the page even more interactive. This seemed like such a cool idea... that we threw it all over our <a href="https://hack4impact.org/" target="_blank" rel="noreferrer">Hack4Impact</a> site üòÅ</p>
<p>So let's explore</p>
<ul>
<li>üéà Why CSS variables can help us</li>
<li>‚ú® How we style our button</li>
<li>ü™§ How we map mouse movements to a metallic shine</li>
<li>üî® How to adapt this animation to any UI framework</li>
</ul>
<p><em><strong>Onwards!</strong></em></p>
<h2 id="link-our-end-goal">Our end goal</h2>
<p><img src="https://raw.githubusercontent.com/Holben888/personal-blog/main/css-shiny-buttons/shiny-button-demo.gif" alt="Demo of buttons shining on hover on hack4impact.org website" loading="lazy"  /></p>
<p>The effect is pretty simple on the surface. Just shift the color a little bit whenever you hover over the button, plus a little circular gradient for a &quot;metallic&quot; sheen.</p>
<p>But there's a bit of added spice that CSS can't pull off on its own: <strong>We need to track your cursor position</strong> to make this interactive! Luckily, this has gotten a lot easier over the years; You won't even need a UI framework or state management to pull it off üëÄ</p>
<h2 id="link-brief-primer-on-css-variables">üéà Brief primer on CSS variables</h2>
<p>In case you haven't heard, CSS variables are kind of taking web development by storm right now. They're a bit like those <code>$</code> variables preprocessors like <a href="https://sass-lang.com/" target="_blank" rel="noreferrer">SASS</a> and <a href="http://lesscss.org/" target="_blank" rel="noreferrer">LESS</a> let you pull off, but with one huge benefit: <strong>you can change the value of these variables at runtime</strong> using JavaScript üò±</p>
<p>Let's see a simple example. Say we want to make a balloon pump, where you hit a button as fast as you can to &quot;inflate&quot; an HTML-style balloon.</p>
<p>If we didn't know anything about CSS variables, we'd probably do some style manipulation straight from JavaScript. Here's how we'd pump up a balloon using the <code>transform</code> property:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> balloon <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.balloon'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// make the balloon bigger by 50%</span>
balloon<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token string">'scale(1.5)'</span><span class="token punctuation">;</span>
</code></pre>
<p>Or, to make the balloon just a little bit bigger on every button click:</p>
<pre class="language-js"><code class="language-js"><span class="token operator">...</span>
<span class="token keyword">const</span> pump <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.pump'</span><span class="token punctuation">)</span>
<span class="token comment">// keep track of the balloon's size in a JS variable</span>
<span class="token keyword">let</span> size <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
pump<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  size <span class="token operator">+=</span> <span class="token number">0.1</span><span class="token punctuation">;</span>
	balloon<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">scale(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>size<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>There's nothing wrong with this so far. But it has some growing pains:</p>
<ol>
<li>We need to keep track of a CSS property (the balloon's <code>scale</code> size) <strong>using a JS variable.</strong> This could <em>ahem</em> <strong>balloon</strong> into a suite of state variables overtime as we animate more elements throughout our app.</li>
<li><strong>We're writing our CSS using strings.</strong> This leaves a sour taste in my mouth personally, since we loose all our syntax highlighting + editor suggestions. It can also get nasty to maintain when we want that <code>size</code> variable in other parts of our styles. For example, what if we wanted to change the <code>background-position</code> as the balloon inflates? Or the <code>height</code> and <code>width</code>? Or some <code>linear-gradient</code> with multiple color positions?</li>
</ol>
<h3 id="link-css-variables-to-the-rescue">CSS variables to the rescue</h3>
<p>As you may have guessed, we can store this <code>size</code> from our code as a CSS variable!</p>
<p>We can use the same <code>.style</code> attribute as before, this time using the <code>setProperty</code> function to assign a value:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">let</span> size <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
pump<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  size <span class="token operator">+=</span> <span class="token number">0.1</span><span class="token punctuation">;</span>
	balloon<span class="token punctuation">.</span>style<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">'--size'</span><span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>Then, slide that variable into our <code>transform</code> property from the CSS:</p>
<pre class="language-css"><code class="language-css"><span class="token selector">.balloon</span> <span class="token punctuation">{</span>
  <span class="token comment">/* set a default / starting value if JS doesn't supply anything */</span>
  <span class="token property">--size</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
  ...
  <span class="token comment">/* use var(...) to apply the value */</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--size<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Heck, you can ditch that <code>size</code> variable entirely and make CSS the source of truth! Just read the value from CSS directly whenever you try to increment it:</p>
<pre class="language-js"><code class="language-js">pump<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// Note: you *can't* use balloon.style here!</span>
  <span class="token comment">// This won't give you the up-to-date value of your variable.</span>
  <span class="token comment">// For that, you'll need getComputedStyle(...)</span>
	<span class="token keyword">const</span> size <span class="token operator">=</span> <span class="token function">getComputedStyle</span><span class="token punctuation">(</span>balloon<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPropertyValue</span><span class="token punctuation">(</span><span class="token string">'--size'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// size is a string at this stage, so we'll need to cast it to a number</span>
  balloon<span class="token punctuation">.</span>style<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">'--size'</span><span class="token punctuation">,</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">0.1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>There's some caveats to this of course. Namely, CSS variables <strong>are always strings</strong> when you retrieve them, so you'll need to cast to an <code>int</code> or a <code>float</code> (for decimals) as necessary. The whole <code>.style</code> vs. <code>getComputedStyle</code> is a little weird to remember as well, so do whatever makes sense for you!</p>
<p>Here's a fully working example to <em>pump</em> up your confidence üéà</p>
<p class="codepen" data-height="400" data-theme-id="light" data-default-tab="js,result" data-user="bholmesdev" data-slug-hash="vYXogza" style="height: 400px; text-align: center" data-pen-title="Detect current section">
<span><a href="https://codepen.io/bholmesdev/pen/vYXogza">See the Pen</a> by Benjamin Holmes (<a href="https://codepen.io/bholmesdev">@bholmesdev</a>)
  on <a href="https://codepen.io/">CodePen</a>.</span>
</p>
<h2 id="link-lets-get-rolling-on-our-shiny-button">‚ú® Let's get rolling on our shiny button</h2>
<p>Before putting our newfound CSS variable knowledge to the test, let's jump into the styles we'll need for this button.</p>
<p>Remember that we want a smooth gradient of color to follow our mouse cursor, like a light shining on a piece of metal. As you can imagine, we'll want a <code>radial-gradient</code> on our <code>button</code> that we can easily move around.</p>
<p>We could add a gradient as a secondary background on our button (yes, you can <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Backgrounds_and_Borders/Using_multiple_backgrounds" target="_blank" rel="noreferrer">overlay multiple backgrounds</a> on the same element!). But for the sake of simplicity, let's just add another element <em>inside</em> our button representing our &quot;shiny&quot; effect. We'll do this using a <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Pseudo-elements" target="_blank" rel="noreferrer">pseudo-element</a> to be fancy üòÅ</p>
<pre class="language-css"><code class="language-css"><span class="token selector">.shiny-button</span> <span class="token punctuation">{</span>
  <span class="token comment">/* add this property to our button, */</span>
  <span class="token comment">/* so we can position our shiny gradient *relative* to the button itself */</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token comment">/* then, make sure our shiny effect */</span>
  <span class="token comment">/* doesn't "overflow" outside of our button */</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> #3984ff<span class="token punctuation">;</span> <span class="token comment">/* blue */</span>
  ...
<span class="token punctuation">}</span>

<span class="token selector">.shiny-button::after</span> <span class="token punctuation">{</span>
  <span class="token comment">/* all pseudo-elements need "content" to work. We'll make it empty here */</span>
  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
  <span class="token comment">/* make sure the gradient isn't too bright */</span>
	<span class="token property">opacity</span><span class="token punctuation">:</span> 0.6<span class="token punctuation">;</span>
  <span class="token comment">/* add a circular gradient that fades out on the edges */</span>
	<span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">radial-gradient</span><span class="token punctuation">(</span>white<span class="token punctuation">,</span> #3984ff00 80%<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><em><strong>Side note:</strong> You may have noticed our 8-digit hex code on the gradient background. This is a neat feature that lets you add transparency to your hex codes! <a href="https://css-tricks.com/8-digit-hex-codes/" target="_blank" rel="noreferrer">More on that here.</a></em></p>
<p>Great! With this in place, we should see a subtle, stationary gradient covering our button.</p>
<p class="codepen" data-height="400" data-theme-id="light" data-default-tab="css,result" data-user="bholmesdev" data-slug-hash="LYbPjNQ" style="height: 400px; text-align: center" data-pen-title="Detect current section">
<span><a href="https://codepen.io/bholmesdev/pen/LYbPjNQ">See the Pen</a> by Benjamin Holmes (<a href="https://codepen.io/bholmesdev">@bholmesdev</a>)
  on <a href="https://codepen.io/">CodePen</a>.</span>
</p>
<h2 id="link-now-lets-track-some-mouse-cursors">ü™§ Now, lets track some mouse cursors</h2>
<p>We'll need to dig into some native browser APIs for this. You probably just listen for <code>click</code> 99% of the time, so it's easy to forget the dozens of other event listeners at our disposal! We'll need to use the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/mousemove_event" target="_blank" rel="noreferrer"><code>mousemove</code> event</a> for our purposes:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> button <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.shiny-button'</span><span class="token punctuation">)</span>
button<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
	<span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>If we log out or <code>event</code> object, we'll find some useful values in here. The main one's we're focusing on are <code>clientX</code> and <code>clientY</code>, which tell you the mouse position <strong>relative to the entire screen.</strong> Hover over this button to see what those values look like:</p>
<p class="codepen" data-height="400" data-theme-id="light" data-default-tab="js,result" data-user="bholmesdev" data-slug-hash="yLVBNzE" style="height: 400px; text-align: center" data-pen-title="Detect current section">
<span><a href="https://codepen.io/bholmesdev/pen/yLVBNzE">See the Pen</a> by Benjamin Holmes (<a href="https://codepen.io/bholmesdev">@bholmesdev</a>)
  on <a href="https://codepen.io/">CodePen</a>.</span>
</p>
<p>This is pretty useful, but it's not <em>quite</em> the info we're looking for. Remember that our shiny effect is positioned <em>relative</em> to the button surrounding it. For instance, to position the effect at the top-left corner of the button, we'd need to set <code>top: 0; left: 0;</code> So, we'd expect a reading of <code>x: 0 y: 0</code> when we hover in our example above... But this definitely <em>isn't</em> the values that <code>clientX</code> and <code>clientY</code> give us üòï</p>
<p>There isn't a magical <code>event</code> property for this, so we'll need to get a little creative. Remember that <code>clientX</code> and <code>clientY</code> give us the <strong>cursor position</strong> relative to the window we're in. There's also this neat function called <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect" target="_blank" rel="noreferrer"><code>getBoundingClientRect()</code></a>, which gets the x and y position of our <strong>button</strong> relative to the window. So if we subtract our button's position from our cursor's position... we should get our position relative to the button!</p>
<p>This is probably best explored with visuals. Hover your mouse around to see how our <code>mouse</code> values, <code>boundingClientRect</code> values, and subtracted values all interact:</p>
<p class="codepen" data-height="400" data-theme-id="light" data-default-tab="js,result" data-user="bholmesdev" data-slug-hash="YzpKGbo" style="height: 400px; text-align: center" data-pen-title="Detect current section">
<span><a href="https://codepen.io/bholmesdev/pen/YzpKGbo">See the Pen</a> by Benjamin Holmes (<a href="https://codepen.io/bholmesdev">@bholmesdev</a>)
  on <a href="https://codepen.io/">CodePen</a>.</span>
</p>
<h2 id="link-pipe-those-coordinates-into-css">üíÖ Pipe those coordinates into CSS</h2>
<p>Alright, let's put two and two together here! We'll pass our values from the <code>mousemove</code> listener:</p>
<pre class="language-js"><code class="language-js">button<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"mousemove"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y <span class="token punctuation">}</span> <span class="token operator">=</span> button<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  button<span class="token punctuation">.</span>style<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">"--x"</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>clientX <span class="token operator">-</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
  button<span class="token punctuation">.</span>style<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">"--y"</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>clientY <span class="token operator">-</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>Then, we'll add some CSS variables to that shiny pseudo-element from before:</p>
<pre class="language-css"><code class="language-css"><span class="token selector">.shiny-button::after</span> <span class="token punctuation">{</span>
  ...
  <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--y<span class="token punctuation">,</span> 0<span class="token punctuation">)</span> * 1px - 50px<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--x<span class="token punctuation">,</span> 0<span class="token punctuation">)</span> * 1px - 50px<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>A couple notes here:</strong></p>
<ol>
<li>
<p>We can set a default value for our variables using the second argument to <code>var</code>. In this case, we'll use 0 for both.</p>
</li>
<li>
<p>CSS variables have a weird concept of &quot;types.&quot; Here, we're assuming we'll pass our <code>x</code> and <code>y</code> as integers.  This makes sense from our JavaScript, but CSS has a hard time figuring out that something like <code>10</code> <em>really</em> means <code>10px</code>. To fix this, <strong>just multiply by the unit you want using <code>calc</code></strong> (aka <code>* 1px</code>).</p>
</li>
<li>
<p>We subtract half the <code>width</code> and <code>height</code> from our positioning. This ensures that our shiny circle is centered up with our cursor, instead of following with the top left corner.</p>
</li>
</ol>
<h3 id="link-fade-into-our-effect-on-entry">Fade into our effect on entry</h3>
<p>We're pretty much done here! Just one small tweak: if we leave this animation as-is, our shiny effect will <em>always</em> show in some corner of our button (even when we aren't hovering).</p>
<p>We could fix this from JavaScript to show and hide the effect. But why do that when CSS lets you style-on-hover already?</p>
<pre class="language-css"><code class="language-css"><span class="token comment">/* to explain this selector, we're */</span>
<span class="token comment">/* selecting our ::after element when the .shiny-button is :hover-ed over */</span>
<span class="token selector">.shiny-button:hover::after</span> <span class="token punctuation">{</span>
  <span class="token comment">/* show a faded shiny effect on hover */</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0.4<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.shiny-button::after</span> <span class="token punctuation">{</span>
  ...
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token comment">/* ease into view when "transitioning" to a non-zero opacity */</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> opacity 0.2s<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Boom! Just add a one-line transition effect, and we get a nice fade-in. Here's our finished product ‚ú®</p>
<p class="codepen" data-height="400" data-theme-id="light" data-default-tab="css,result" data-user="bholmesdev" data-slug-hash="RwobPJG" style="height: 400px; text-align: center" data-pen-title="Detect current section">
<span><a href="https://codepen.io/bholmesdev/pen/RwobPJG">See the Pen</a> by Benjamin Holmes (<a href="https://codepen.io/bholmesdev">@bholmesdev</a>)
  on <a href="https://codepen.io/">CodePen</a>.</span>
</p>
<h2 id="link-adapt-to-your-framework-of-choice">üî® Adapt to your framework of choice</h2>
<p>I get it, you might be dismissing this article with all the <code>eventListeners</code> thinking <em>well, I'm sure that JS looks much different in framework X.</em> Luckily, the transition is pretty smooth!</p>
<p>First, you'll need to grab a <strong>reference</strong> to the button you're shine-ifying. In React, we can use a <code>useRef</code> hook to retrieve this:</p>
<pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> <span class="token function-variable function">ShinyButton</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// null to start</span>
  <span class="token keyword">const</span> buttonRef <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
  React<span class="token punctuation">.</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// add a useEffect to check that our buttonRef has a value</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>buttonRef<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token operator">...</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>buttonRef<span class="token punctuation">]</span><span class="token punctuation">)</span>
  
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>buttonRef<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">‚ú®‚ú®‚ú®</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
<span class="token punctuation">}</span>
</code></pre>
<p>Or in Svelte, we can <code>bind</code> our element to a variable:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> onMount <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'svelte'</span>
  <span class="token keyword">let</span> buttonRef
  <span class="token comment">// our ref always has a value onMount!</span>
  <span class="token function">onMount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name"><span class="token namespace">bind:</span>this</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{buttonRef}</span><span class="token punctuation">></span></span>‚ú®‚ú®‚ú®<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
</code></pre>
<p><em>Aside: I always like including Svelte examples, since they're usually easier to understand</em> üòÅ</p>
<p>Once we have this reference, it's business-as-usual for our property setting:</p>
<h3 id="link-react-example">React example</h3>
<pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> <span class="token function-variable function">ShinyButton</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> buttonRef <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
  <span class="token comment">// throw your mousemove callback up here to "add" and "remove" later</span>
  <span class="token comment">// might be worth a useCallback based on the containerRef as well!</span>
  <span class="token keyword">function</span> <span class="token function">mouseMoveEvent</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y <span class="token punctuation">}</span> <span class="token operator">=</span> containerRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    containerRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>style<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">'--x'</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>clientX <span class="token operator">-</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
    containerRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>style<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">'--y'</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>clientY <span class="token operator">-</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  React<span class="token punctuation">.</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>buttonRef<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      buttonRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> mouseMoveEvent<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// don't forget to *remove* the eventListener</span>
    <span class="token comment">// when your component unmounts!</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> buttonRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> mouseMoveEvent<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>buttonRef<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token operator">...</span>
</code></pre>
<h3 id="link-svelte-example">Svelte example</h3>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> onMount<span class="token punctuation">,</span> onDestroy <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'svelte'</span>
  <span class="token keyword">let</span> buttonRef
  <span class="token comment">// again, declare your mousemove callback up top</span>
  <span class="token keyword">function</span> <span class="token function">mouseMoveEvent</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y <span class="token punctuation">}</span> <span class="token operator">=</span> buttonRef<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    buttonRef<span class="token punctuation">.</span>style<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">'--x'</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>clientX <span class="token operator">-</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
    buttonRef<span class="token punctuation">.</span>style<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">'--y'</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>clientY <span class="token operator">-</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">onMount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
		buttonRef<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> mouseMoveEvent<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    buttonRef<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> mouseMoveEvent<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
</code></pre>
<p>The main takeaway: üí° <strong>don't forget to remove event listeners when your component unmounts!</strong></p>
<h2 id="link-check-out-our-live-example-on-hack4impact">Check out our live example on Hack4Impact</h2>
<p>If you want to see how this works in-context, check out this CodeSandbox for our Hack4Impact site. We also added some CSS fanciness to make this effect usable on <em>any</em> element, not just buttons ‚ú®</p>
<p><strong>To check out the component, <a href="https://codesandbox.io/s/hack4impact-website-0kn5m?file=/components/shared/Nav/index.tsx" target="_blank" rel="noreferrer">head over here</a>.</strong></p>
<p>And if this helped you out, you can learn more about ‚ù§Ô∏è <a href="https://hack4impact.org/" target="_blank" rel="noreferrer">Hack4Impact here</a>.</p>
</div><hr/><footer><p>Learn a little something? <strong><a href="https://twitter.com/intent/tweet?text=Woah,%20I%20learned%20so%20much%20from%20this!%20%22A%20shiny-on-hover%20effect%20that%20follows%20your%20mouse%20(CSS)%20%E2%9C%A8%22%20by%20@bholmesdev%20https://bholmes.dev/blog/a-shiny-on-hover-effect-that-follows-your-mouse-css/" target="_blank" rel="noreferrer">Share this post</a> on Twitter!</strong></p><section class="about-the-author"><img src="../../assets/images/me.jpg" alt="Hand drawn portrait of Ben Holmes"/><div><address><a rel="author" href="../../index.html">Ben Holmes </a></address>is a web developer + UI designer by trade from Charleston SC. He's been tinkering with JavaScript and CSS since 2014, and has lead a <a href="https://hack4impact.org/dev-bootcamp">full stack bootcamp curriculum</a> used by universities across the country. Now, he's working fulltime at Peloton and teaching the world a bit of web whimsy in his spare time.</div></section></footer></article></main><footer><div class="content"><div class="newsletter"><h2>Woah, there's a newsletter too!</h2><form action="https://tinyletter.com/bholmesdev" method="post" target="_blank"><label for="email">Email</label><input id="email" type="email" name="email" placeholder="10xengineer@genius.club" required="required"/><p class="newsletter__never-spam">Don't worry, I won't spam you</p><button class="cta-link" type="submit">Yes please, more content<svg xmlns="http://www.w3.org/2000/svg" fill="#5f4b32" width="34" height="34" viewBox="0 0 512 512"><path d="M48 270.9l118.9 44.6L181.7 464 256 360l104 104L464 48 48 270.9zm294.9 126L260 313.4 374.9 152 193.6 289.8 124.9 265l291-156.2-73 288.1z"/></svg></svg></button></form></div><div class="socials"><div class="socials__links"><a href="https://dev.to/bholmesdev" target="_blank" rel="noreferrer" aria-label="Ben's DEV.to blog"><svg xmlns="http://www.w3.org/2000/svg" fill="#5f4b32" width="34" height="34" viewBox="0 0 34 34"><path d="M18.119,22.38a1.48,1.48,0,0,0-.881-.33H15.917v7.929h1.321a1.449,1.449,0,0,0,.881-.33,1.172,1.172,0,0,0,.44-.991V23.371a1.172,1.172,0,0,0-.44-.991ZM39.669,9H12.331A3.332,3.332,0,0,0,9,12.324V39.676A3.332,3.332,0,0,0,12.331,43H39.669A3.332,3.332,0,0,0,43,39.676V12.324A3.332,3.332,0,0,0,39.669,9ZM20.7,28.67a3.466,3.466,0,0,1-3.668,3.586H13.508V19.7H17.1a3.462,3.462,0,0,1,3.593,3.586L20.7,28.67Zm7.647-6.731H24.3v2.918h2.471V27.1H24.3v2.918h4.047v2.244H23.626a1.531,1.531,0,0,1-1.569-1.494v-9.5A1.531,1.531,0,0,1,23.55,19.7h4.8v2.237Zm7.86,8.755c-1,2.333-2.794,1.872-3.6,0L29.682,19.7h2.471l2.257,8.631L36.654,19.7h2.471L36.207,30.694Z" transform="translate(-9 -9)"/></svg></a><a href="https://twitter.com/bholmesdev" target="_blank" rel="noreferrer" aria-label="Ben's Twitter"><svg xmlns="http://www.w3.org/2000/svg" fill="#5f4b32" width="34" height="34" viewBox="0 0 34 34"><path d="M55.383,67.4a14.634,14.634,0,0,1-4.157,1.144,7.264,7.264,0,0,0,3.185-4.008,14.384,14.384,0,0,1-4.6,1.757,7.237,7.237,0,0,0-12.524,4.95,7.087,7.087,0,0,0,.187,1.652,20.514,20.514,0,0,1-14.924-7.574A7.253,7.253,0,0,0,24.8,75a7.07,7.07,0,0,1-3.29-.9v.09a7.245,7.245,0,0,0,5.809,7.1,7.287,7.287,0,0,1-1.907.254,6.829,6.829,0,0,1-1.361-.135,7.25,7.25,0,0,0,6.766,5.032,14.513,14.513,0,0,1-8.995,3.1,14.673,14.673,0,0,1-1.727-.1,20.234,20.234,0,0,0,11.081,3.275c13.331,0,20.613-11.043,20.613-20.621,0-.314-.007-.628-.022-.935A14.736,14.736,0,0,0,55.383,67.4Z" transform="translate(-20.1 -64)"/></svg></a><a href="https://github.com/holben888" target="_blank" rel="noreferrer" aria-label="Ben's GitHub"><svg xmlns="http://www.w3.org/2000/svg" fill="#5f4b32" width="34" height="34" viewBox="0 0 34 34"><path d="M10,115.987a18.6,18.6,0,0,0,.434,4.181,12.443,12.443,0,0,0,1.2,3.251,9.207,9.207,0,0,0,1.943,2.429,11.2,11.2,0,0,0,2.56,1.714,15.1,15.1,0,0,0,3.15,1.079,26,26,0,0,0,3.615.583q1.847.167,4.056.167,2.227,0,4.073-.167a26.227,26.227,0,0,0,3.626-.583,15.681,15.681,0,0,0,3.168-1.079,11.191,11.191,0,0,0,2.578-1.714,9.284,9.284,0,0,0,1.964-2.429,12.2,12.2,0,0,0,1.2-3.251A18.6,18.6,0,0,0,44,115.987a10.2,10.2,0,0,0-2.758-7.133,8.923,8.923,0,0,0,.274-.906,12.4,12.4,0,0,0,.232-1.447,8.1,8.1,0,0,0-.083-2.168,11.516,11.516,0,0,0-.708-2.512l-.25-.049a3.352,3.352,0,0,0-.874.024,9.708,9.708,0,0,0-1.412.3,12.073,12.073,0,0,0-2.078.864,24.135,24.135,0,0,0-2.685,1.6,26.284,26.284,0,0,0-6.668-.666,26.208,26.208,0,0,0-6.651.666,22.6,22.6,0,0,0-2.7-1.6,13.381,13.381,0,0,0-2.054-.864,8.05,8.05,0,0,0-1.429-.291,4.676,4.676,0,0,0-.84-.042,1.455,1.455,0,0,0-.274.059,11.462,11.462,0,0,0-.708,2.512,8.1,8.1,0,0,0-.083,2.168,12.664,12.664,0,0,0,.232,1.447,8.922,8.922,0,0,0,.274.906A10.223,10.223,0,0,0,10,115.987Zm4.174,4.174a5.879,5.879,0,0,1,2.179-4.389,4.334,4.334,0,0,1,1.513-.906,6.575,6.575,0,0,1,1.953-.347c.725-.028,1.422-.021,2.085.017s1.485.09,2.46.156,1.818.1,2.526.1,1.551-.031,2.529-.1,1.8-.118,2.46-.156,1.36-.045,2.085-.017a6.687,6.687,0,0,1,1.953.347,4.366,4.366,0,0,1,1.513.906,5.814,5.814,0,0,1,2.179,4.389,8.215,8.215,0,0,1-.357,2.536,6.367,6.367,0,0,1-.912,1.853,4.535,4.535,0,0,1-1.547,1.273,10.782,10.782,0,0,1-1.929.8,13.909,13.909,0,0,1-2.411.441c-.982.1-1.856.17-2.626.191s-1.749.035-2.935.035-2.165-.01-2.935-.035-1.644-.087-2.626-.191a13.648,13.648,0,0,1-2.411-.441,11.153,11.153,0,0,1-1.929-.8,4.535,4.535,0,0,1-1.547-1.273,6.414,6.414,0,0,1-.916-1.853A8.438,8.438,0,0,1,14.174,120.161Zm17.076-.333c0,1.759.951,3.188,2.127,3.188s2.127-1.426,2.127-3.188-.951-3.188-2.127-3.188S31.25,118.066,31.25,119.828Zm-12.75,0c0,1.759.951,3.188,2.127,3.188s2.127-1.426,2.127-3.188-.951-3.188-2.127-3.188S18.5,118.066,18.5,119.828Z" transform="translate(-10 -101.754)"/></svg></a></div><p>Follow along with <strong>Ben</strong> for the fun, for the whimsy, and for the love of building websites ‚ô• </p></div></div></footer></div></body>
          <script src="../../__main.mjs" defer></script>
          
          
<!-- Mirrored from bholmes.dev/blog/a-shiny-on-hover-effect-that-follows-your-mouse-css/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 16 Mar 2022 05:56:32 GMT -->
</html>