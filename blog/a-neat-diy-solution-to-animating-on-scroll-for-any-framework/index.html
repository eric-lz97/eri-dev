<!DOCTYPE html><html lang="en-US">
<!-- Mirrored from bholmes.dev/blog/a-neat-diy-solution-to-animating-on-scroll-for-any-framework/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 16 Mar 2022 05:58:55 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head><link rel="stylesheet" href="__styles.html"><link rel="stylesheet" href=../../_layouts/__styles.css><link rel="stylesheet" href=../../_layouts/blog-post/__styles.css><title>A neat DIY solution to animating on scroll (for any framework)</title><link rel="preload" href="https://use.typekit.net/liz3dnm.css" as="style"/><link rel="preload" href="../../assets/fonts/Atkinson/Atkinson-Hyperlegible-Regular.woff2" as="font" crossorigin="anonymous"/><link rel="preload" href="../../assets/fonts/Atkinson/Atkinson-Hyperlegible-Bold.woff2" as="font" crossorigin="anonymous"/><link rel="preload" href="../../assets/fonts/Atkinson/Atkinson-Hyperlegible-Italic.woff2" as="font" crossorigin="anonymous"/><link rel="preload" href="../../assets/fonts/Atkinson/Atkinson-Hyperlegible-BoldItalic.woff2" as="font" crossorigin="anonymous"/><link rel="stylesheet" href="https://use.typekit.net/liz3dnm.css"/><link rel="icon" type="img/jpg" href="../../assets/favicon.jpg"/><link rel="canonical" href="index.html"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><!-- TODO: automatically generate these at buildtime--><link rel="modulepreload" href="__client.html"/><link rel="modulepreload" href="__data.html"/><link rel="modulepreload" href="../../_layouts/__client.mjs"/><link rel="modulepreload" href="../../_layouts/__data.mjs"/><link rel="preload" as="fetch" href="../../index-2.html"/><link rel="preload" as="fetch" href="../../work/index.html"/><link rel="preload" as="fetch" href="../../contact/index.html"/><meta name="author" content="Ben Holmes"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@bholmesdev"/><meta name="twitter:creator" content="@bholmesdev"/><meta name="description" content="AOS libraries sure are slick, but why add dependencies when it an be simple to implement yourself?"/><meta property="og:url" content="index.html"/><meta property="og:image" content="https://thepracticaldev.s3.amazonaws.com/i/obp112knr1cvmpa0kjlu.png"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:site_name" content="Ben Holmes"/><meta property="og:title" content="A neat DIY solution to animating on scroll (for any framework)"/><meta property="og:description" content="AOS libraries sure are slick, but why add dependencies when it an be simple to implement yourself?"/><!-- Analytics--><script async="async" defer="defer" data-domain="bholmes.dev" src="https://stats.bholmes.dev/js/index.js"></script></head><body><div id="loading-spinner" aria-label="loading"><div class="loading-spinner__graphic"><div class="loading-spinner__graphic--dash"></div><div class="loading-spinner__graphic--dash"></div><div class="loading-spinner__graphic--dash"></div></div></div><nav id="site-navigation"><div class="jump-to-section__container"><button id="jump-to-section__toggle" aria-label="Reveal table of contents"><span>0</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M128 192l128 128 128-128z"/></svg></button><div class="jump-to-section__label-container"><p id="jump-to-section__label"></p></div><ul id="jump-to-section__links"></ul></div><div class="primary-nav__container"><ul id="primary-nav__links"><li><a href="../../index.html">Ben</a></li><li><a class="active" href="../index.html">Blog</a></li><li><a href="../../work/index-2.html">Works</a></li><li><a href="../../contact/index-2.html">Contact</a></li></ul><button id="primary-nav__toggle" aria-label="Reveal navigation links"><div class="stripe-top"></div><div class="stripe-middle"></div><div class="stripe-bottom"></div></button></div></nav><div id="loading-spinner" aria-label="loading"><div class="loading-spinner__graphic"><div class="loading-spinner__graphic--dash"></div><div class="loading-spinner__graphic--dash"></div><div class="loading-spinner__graphic--dash"></div></div></div><div data-page="_layouts/blog-post"><main><article data-page="blog/a-neat-diy-solution-to-animating-on-scroll-for-any-framework"><header><picture><source type="image/webp" srcset="/assets/pug-images/87182b83-600.webp 600w, /assets/pug-images/87182b83-800.webp 800w, /assets/pug-images/87182b83-1400.webp 1400w" sizes="(min-width: 800px) 720px, 100vw"><source type="image/jpeg" srcset="/assets/pug-images/87182b83-600.jpeg 600w, /assets/pug-images/87182b83-800.jpeg 800w, /assets/pug-images/87182b83-1400.jpeg 1400w" sizes="(min-width: 800px) 720px, 100vw"><img alt="AOS libraries sure are slick, but why add dependencies when it an be simple to implement yourself?" loading="lazy" decoding="async" widths="800,1000,1400" src="../../assets/pug-images/87182b83-600.jpg" width="1400" height="702"></picture><h1>A neat DIY solution to animating on scroll (for any framework)</h1><p class="details"><span><strong>8</strong> minute read</span><span class="spacer">•</span><span>Last updated <time pubdate="pubdate" datetime="2019-04-09T15:46:47.093Z">April 9, 2019</time></span></p></header><div><blockquote>
<p><strong>Update 4.10.19</strong> A recent comment below blew my mind name dropping the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API" target="_blank" rel="noreferrer">Intersection Observer API</a>. This was essentially built for exactly what this article's about, allowing you to fire a callback whenever an element is in a certain position on the screen! The latter parts of the article about centralizing logic with a store are still totally applicable to this, but intersection observers clean up things a great deal over <code>requestAnimationFrame</code> while also being more performant. However, note there is no IE support and Safari support only just recently. Alrighty, enjoy the rest of this post 😊</p>
</blockquote>
<p>Looking around the world wide web for inspiration, I've found that many sites I love incorporate fun little &quot;reveal&quot; animations whenever I scroll to certain elements. Though subtle, these extra touches make the page feel much less static and more <strong>responsive</strong>. The question is though... what's the best way to implement this?</p>
<p>Just scrolling through CodePen examples, I have found <a href="https://codepen.io/syedrafeeq/pen/yEJKn" target="_blank" rel="noreferrer">time</a> and <a href="https://codepen.io/letsbleachthis/pen/zewKYE" target="_blank" rel="noreferrer">time again</a> that people are reaching for catch-all libraries that can handle it for them. There are countless options out there for animating on scroll, the most prevalent being the aptly named <a href="https://github.com/michalsnik/aos" target="_blank" rel="noreferrer">AOS</a>. I myself was hoping to 🌶 up my site with some scroll animations, so I naturally thought to turn to AOS library for this. However, as my implementation grew more and more specialized (ex. how to I avoid loading this iFrame until I scroll to it?) I began to wonder...</p>
<p><em>Can't I just build this myself?</em></p>
<h2 id="link-maybe-lets-see-how">Maybe. Let's see how</h2>
<p>Just starting with basic, vanilla JS and no frameworks, the approach is actually pretty simple. All we need is an <code>onScroll</code> handler and whatever elements we actually want to animate. Starting with the basics, say we have an element of a specific ID we want to trigger an animation for. As you might imagine, we can reach for the DOM window's <code>onScroll</code> event to figure out where our element is on screen whenever you, well, scroll:</p>
<pre class="language-javascript"><code class="language-javascript">window<span class="token punctuation">.</span><span class="token function-variable function">onScroll</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>target<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'animate-me'</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> elementTop <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>top
    <span class="token keyword">if</span> <span class="token punctuation">(</span>elementTop <span class="token operator">&lt;</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientHeight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        element<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'scrolled-to'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>There are a few nested object attributes we need to grab for this. First, we need to get the pixel value for where the top of the element is on screen. There are a few valid ways of finding this, but through a quick internet search it seems <code>getBoundingClientRect()</code> is the most reliable way of doing so across browsers.</p>
<p>With this, we should compare against the fixed height of the document. This is basically just the height of your browser window, being the <code>clientHeight</code>. If the top of our element is less than this height, then some part of it must be on screen. Now, we just add our keyframe to our CSS on <code>.animate-me.scrolled-to</code> and we're good to go 👍</p>
<h3 id="link-okay-great-we-basically-recreated-a-mdn-help-page-example">Okay great, we basically recreated a MDN help page example...</h3>
<p>With that out of the way, let's actually make this useable in the real world. Firstly, if you got curious and threw a <code>console.log</code> statement in there, you likely got this whenever you twitched your scroll wheel.</p>
<p><picture><source type="image/webp" srcset="/assets/md-images/310ab2dd-600.webp 600w, /assets/md-images/310ab2dd-1000.webp 1000w" sizes="(min-width: 800px) 720px, 100vw"><source type="image/jpeg" srcset="/assets/md-images/310ab2dd-600.jpeg 600w, /assets/md-images/310ab2dd-1000.jpeg 1000w" sizes="(min-width: 800px) 720px, 100vw"><img alt="Console log of on scroll handler" loading="lazy" decoding="async" src="../../assets/md-images/310ab2dd-600.jpg" width="1000" height="624"></picture></p>
<p>This reflects how expensive analyzing every scroll event actually is. We're executing a function for every pixel we scroll, and as we start making this function more robust, that can start causing lags and stutters.</p>
<p>One way to resolve this is using a <code>requestAnimationFrame</code> to decide when our callback gets fired. This is another window-level function where you may queue up callbacks for the browser to call. When it feels it is ready to execute those functions without un-buttery-smoothing your scrolling experience, it will fire them off. Thankfully, this approach has seen <a href="https://caniuse.com/#search=requestanimationframe" target="_blank" rel="noreferrer">relatively high browser adoption</a>. All we need is a wrapper around our <code>onScroll</code> handler to <code>requestAnimationFrame</code>, along with a <code>boolean</code> flag to let us know whether or not our previous callback is done executing:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> waitingOnAnimRequest <span class="token operator">=</span> <span class="token boolean">false</span>

<span class="token keyword">const</span> <span class="token function-variable function">animChecker</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// Our old handler</span>
    <span class="token keyword">const</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'animate-me'</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> elementTop <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>top
    <span class="token keyword">if</span> <span class="token punctuation">(</span>elementTop <span class="token operator">&lt;</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientHeight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        element<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'scrolled-to'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

window<span class="token punctuation">.</span><span class="token function-variable function">onScroll</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>target<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>waitingOnAnimRequest<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
            <span class="token function">animChecker</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>
            waitingOnAnimRequest <span class="token operator">=</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        waitingOnAnimRequest <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Great! Now our calls should be a bit more efficient. But let's address a more pressing issue: how do we get this working for <strong>any</strong> element in the document we may want to animate on scroll?</p>
<p>It certainly wouldn't make sense to keep adding callbacks for each possible ID or className we would need, so why not just create a centralized array we can append all of our element selectors to?</p>
<h2 id="link-time-for-some-loops">Time for some loops</h2>
<p>This addition is fairly straightforward leveraging <code>querySelectorAll</code>. Just create a global array with all selectors that should animate (either IDs or classes) and loop over them like so:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> animationSelectors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'#ID-to-animate'</span><span class="token punctuation">,</span> <span class="token string">'.class-to-animate'</span><span class="token punctuation">]</span>

<span class="token keyword">const</span> <span class="token function-variable function">animChecker</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// Loop over our selectors</span>
    animationSelectors<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">selector</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token comment">// Loop over all matching DOM elements for that selector</span>
        target<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">element</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> elementTop <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>top
            <span class="token keyword">if</span> <span class="token punctuation">(</span>elementTop <span class="token operator">&lt;</span> bodyHeight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                 element<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'scrolled-to'</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token operator">...</span>
</code></pre>
<p>Now our scroll animation checker should be able to handle any element we throw at it!</p>
<h2 id="link-neat-but-i-use-x-framework">Neat! But I use X framework...</h2>
<p>...and I don't think I could use this because of Y 🤷‍♀️</p>
<p>Now hold it right there. I understand everyone's tooling has its own set of quirks, so let's try to address some of them.</p>
<h3 id="link-i-use-a-component-system-so-how-do-i-centralize-this-logic">I use a component system, so how do I centralize this logic?</h3>
<p>Though it would be nice to have a succinct list of classes and IDs we would want to animate, components, especially with scoped CSS solutions, make it difficult to keep this list readable and expandable.</p>
<p>Thankfully, this solution just needs a single array of strings to get working, so we can use a global store each component can update with the DOM selectors they want to animate. I used this in a recent project  built on SvelteJS, which uses a subscription-based global store. To update <code>animationSelectors</code>, I just created it as a store...</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">const</span> animationTriggers <span class="token operator">=</span> <span class="token function">writable</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>... and added the class name from whichever component when it gets created.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> animationTriggers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../stores'</span>

<span class="token function">onMount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    animationTriggers<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token operator">...</span>$animationTriggers<span class="token punctuation">,</span>
      <span class="token string">'.wackily-animated-class'</span><span class="token punctuation">,</span>
      <span class="token string">'#section-id'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>This works just as well for common global state solutions like Redux and React Context as well. Redux implementations widely vary by middleware so I'll spare the multi-file example here, but here's an option using React Context (which works in vanilla React):</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">// store.js</span>
<span class="token operator">...</span>
<span class="token keyword">const</span> AnimationTriggerContext <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">StoreWrapper</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
            selectors<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token comment">// create a provider to wrap our components in at the parent level</span>
            <span class="token operator">&lt;</span>AnimationTriggerContext<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
                <span class="token comment">// make our array of selectors accessible from all children</span>
                selectors<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>selectors<span class="token punctuation">,</span>
                <span class="token comment">// add a helper function to update our array</span>
                <span class="token function-variable function">addSelector</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">selector</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                        selectors<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>selectors<span class="token punctuation">,</span> selector<span class="token punctuation">]</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span>
                <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>AnimationTriggerContext<span class="token punctuation">.</span>Provider<span class="token operator">></span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//childManyLayersDeep.js</span>
<span class="token operator">...</span>
<span class="token keyword">class</span> <span class="token class-name">Child</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">addSelector</span><span class="token punctuation">(</span><span class="token string">'special-class'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"special-class"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//wrap the child with a 'withContext' so it can be accessed</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">withContext</span><span class="token punctuation">(</span>Child<span class="token punctuation">)</span>
</code></pre>
<p>Naturally, this method is extendable to VueJS, RxJS observables, and basically everywhere else you might use a global store.</p>
<h3 id="link-okay-thats-pretty-nifty-but-i-cant-use-basic-css-selectors-these-are-components">Okay that's pretty nifty... but I can't use basic CSS selectors. These are components!</h3>
<p>Okay fair point; this can complicate things in most component-based frameworks. The simplest compromise is to pass a reference to the element itself in our &quot;add&quot; function instead of the class name so we can avoid DOM querying. Overall, the humble <code>ref</code> attribute in React or Vue, rather than a class or an ID selector, should do the trick for this.</p>
<h3 id="link-also-im-using-css-in-js-and-would-rather-not-check-for-class-names-to-start-animating-what-are-my-options">Also, I'm using CSS-in-JS and would rather not check for class names to start animating. What are my options?</h3>
<p>This is a fairly common pattern these days and tends to rely more on prop passing that on class name switching. Thankfully, we have pretty much all of the logic in place to figure out these props based on our store. All we need is an extra object attribute on the selector we pass in, say a <code>scrolledTo</code> flag, which can be set &quot;true&quot; or &quot;false&quot;.</p>
<p>For this, we would modify what we add to our store to go from just a string (or ref) to an object...</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">{</span>
    selector<span class="token operator">:</span> <span class="token string">'class-name'</span><span class="token punctuation">,</span>
    scrolledTo<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre>
<p>...and update its flag when scrolled to.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">animChecker</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>elementTop <span class="token operator">&lt;</span> bodyHeight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            animationTriggers<span class="token punctuation">[</span>currentIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>scrolledTo <span class="token operator">=</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Now we can subscribe to our array of animationTriggers (or grab the context, depending on your implementation) and pass our <code>scrolledTo</code> flag as a prop to the component's styles.</p>
<h2 id="link-in-summary">In Summary</h2>
<p>So before you protest that you could have gotten your favorite animate-on-scroll library working in the time it took to read this article... I get it. But I would say taking this feature as a fun little challenge to build out yourself is super helpful for understanding how to make sleek, efficient DOM listeners. It also means you will have one less dependency to worry about in your package, so no breaking changes and a lot of flexibility for adding new features!</p>
<p>To see this solution in action, it is used all over the place on our Georgia Tech club's homepage: Golden Swarm Games. <a href="https://gsg.surge.sh/" target="_blank" rel="noreferrer">Visit the site</a> or <a href="https://github.com/Holben888/gsg-site" target="_blank" rel="noreferrer">the repo</a> to see how our scroll animations work under the hood.</p>
</div><hr/><footer><p>Learn a little something? <strong><a href="https://twitter.com/intent/tweet?text=Woah,%20I%20learned%20so%20much%20from%20this!%20%22A%20neat%20DIY%20solution%20to%20animating%20on%20scroll%20(for%20any%20framework)%22%20by%20@bholmesdev%20https://bholmes.dev/blog/a-neat-diy-solution-to-animating-on-scroll-for-any-framework/" target="_blank" rel="noreferrer">Share this post</a> on Twitter!</strong></p><section class="about-the-author"><img src="../../assets/images/me.jpg" alt="Hand drawn portrait of Ben Holmes"/><div><address><a rel="author" href="../../index.html">Ben Holmes </a></address>is a web developer + UI designer by trade from Charleston SC. He's been tinkering with JavaScript and CSS since 2014, and has lead a <a href="https://hack4impact.org/dev-bootcamp">full stack bootcamp curriculum</a> used by universities across the country. Now, he's working fulltime at Peloton and teaching the world a bit of web whimsy in his spare time.</div></section></footer></article></main><footer><div class="content"><div class="newsletter"><h2>Woah, there's a newsletter too!</h2><form action="https://tinyletter.com/bholmesdev" method="post" target="_blank"><label for="email">Email</label><input id="email" type="email" name="email" placeholder="10xengineer@genius.club" required="required"/><p class="newsletter__never-spam">Don't worry, I won't spam you</p><button class="cta-link" type="submit">Yes please, more content<svg xmlns="http://www.w3.org/2000/svg" fill="#5f4b32" width="34" height="34" viewBox="0 0 512 512"><path d="M48 270.9l118.9 44.6L181.7 464 256 360l104 104L464 48 48 270.9zm294.9 126L260 313.4 374.9 152 193.6 289.8 124.9 265l291-156.2-73 288.1z"/></svg></svg></button></form></div><div class="socials"><div class="socials__links"><a href="https://dev.to/bholmesdev" target="_blank" rel="noreferrer" aria-label="Ben's DEV.to blog"><svg xmlns="http://www.w3.org/2000/svg" fill="#5f4b32" width="34" height="34" viewBox="0 0 34 34"><path d="M18.119,22.38a1.48,1.48,0,0,0-.881-.33H15.917v7.929h1.321a1.449,1.449,0,0,0,.881-.33,1.172,1.172,0,0,0,.44-.991V23.371a1.172,1.172,0,0,0-.44-.991ZM39.669,9H12.331A3.332,3.332,0,0,0,9,12.324V39.676A3.332,3.332,0,0,0,12.331,43H39.669A3.332,3.332,0,0,0,43,39.676V12.324A3.332,3.332,0,0,0,39.669,9ZM20.7,28.67a3.466,3.466,0,0,1-3.668,3.586H13.508V19.7H17.1a3.462,3.462,0,0,1,3.593,3.586L20.7,28.67Zm7.647-6.731H24.3v2.918h2.471V27.1H24.3v2.918h4.047v2.244H23.626a1.531,1.531,0,0,1-1.569-1.494v-9.5A1.531,1.531,0,0,1,23.55,19.7h4.8v2.237Zm7.86,8.755c-1,2.333-2.794,1.872-3.6,0L29.682,19.7h2.471l2.257,8.631L36.654,19.7h2.471L36.207,30.694Z" transform="translate(-9 -9)"/></svg></a><a href="https://twitter.com/bholmesdev" target="_blank" rel="noreferrer" aria-label="Ben's Twitter"><svg xmlns="http://www.w3.org/2000/svg" fill="#5f4b32" width="34" height="34" viewBox="0 0 34 34"><path d="M55.383,67.4a14.634,14.634,0,0,1-4.157,1.144,7.264,7.264,0,0,0,3.185-4.008,14.384,14.384,0,0,1-4.6,1.757,7.237,7.237,0,0,0-12.524,4.95,7.087,7.087,0,0,0,.187,1.652,20.514,20.514,0,0,1-14.924-7.574A7.253,7.253,0,0,0,24.8,75a7.07,7.07,0,0,1-3.29-.9v.09a7.245,7.245,0,0,0,5.809,7.1,7.287,7.287,0,0,1-1.907.254,6.829,6.829,0,0,1-1.361-.135,7.25,7.25,0,0,0,6.766,5.032,14.513,14.513,0,0,1-8.995,3.1,14.673,14.673,0,0,1-1.727-.1,20.234,20.234,0,0,0,11.081,3.275c13.331,0,20.613-11.043,20.613-20.621,0-.314-.007-.628-.022-.935A14.736,14.736,0,0,0,55.383,67.4Z" transform="translate(-20.1 -64)"/></svg></a><a href="https://github.com/holben888" target="_blank" rel="noreferrer" aria-label="Ben's GitHub"><svg xmlns="http://www.w3.org/2000/svg" fill="#5f4b32" width="34" height="34" viewBox="0 0 34 34"><path d="M10,115.987a18.6,18.6,0,0,0,.434,4.181,12.443,12.443,0,0,0,1.2,3.251,9.207,9.207,0,0,0,1.943,2.429,11.2,11.2,0,0,0,2.56,1.714,15.1,15.1,0,0,0,3.15,1.079,26,26,0,0,0,3.615.583q1.847.167,4.056.167,2.227,0,4.073-.167a26.227,26.227,0,0,0,3.626-.583,15.681,15.681,0,0,0,3.168-1.079,11.191,11.191,0,0,0,2.578-1.714,9.284,9.284,0,0,0,1.964-2.429,12.2,12.2,0,0,0,1.2-3.251A18.6,18.6,0,0,0,44,115.987a10.2,10.2,0,0,0-2.758-7.133,8.923,8.923,0,0,0,.274-.906,12.4,12.4,0,0,0,.232-1.447,8.1,8.1,0,0,0-.083-2.168,11.516,11.516,0,0,0-.708-2.512l-.25-.049a3.352,3.352,0,0,0-.874.024,9.708,9.708,0,0,0-1.412.3,12.073,12.073,0,0,0-2.078.864,24.135,24.135,0,0,0-2.685,1.6,26.284,26.284,0,0,0-6.668-.666,26.208,26.208,0,0,0-6.651.666,22.6,22.6,0,0,0-2.7-1.6,13.381,13.381,0,0,0-2.054-.864,8.05,8.05,0,0,0-1.429-.291,4.676,4.676,0,0,0-.84-.042,1.455,1.455,0,0,0-.274.059,11.462,11.462,0,0,0-.708,2.512,8.1,8.1,0,0,0-.083,2.168,12.664,12.664,0,0,0,.232,1.447,8.922,8.922,0,0,0,.274.906A10.223,10.223,0,0,0,10,115.987Zm4.174,4.174a5.879,5.879,0,0,1,2.179-4.389,4.334,4.334,0,0,1,1.513-.906,6.575,6.575,0,0,1,1.953-.347c.725-.028,1.422-.021,2.085.017s1.485.09,2.46.156,1.818.1,2.526.1,1.551-.031,2.529-.1,1.8-.118,2.46-.156,1.36-.045,2.085-.017a6.687,6.687,0,0,1,1.953.347,4.366,4.366,0,0,1,1.513.906,5.814,5.814,0,0,1,2.179,4.389,8.215,8.215,0,0,1-.357,2.536,6.367,6.367,0,0,1-.912,1.853,4.535,4.535,0,0,1-1.547,1.273,10.782,10.782,0,0,1-1.929.8,13.909,13.909,0,0,1-2.411.441c-.982.1-1.856.17-2.626.191s-1.749.035-2.935.035-2.165-.01-2.935-.035-1.644-.087-2.626-.191a13.648,13.648,0,0,1-2.411-.441,11.153,11.153,0,0,1-1.929-.8,4.535,4.535,0,0,1-1.547-1.273,6.414,6.414,0,0,1-.916-1.853A8.438,8.438,0,0,1,14.174,120.161Zm17.076-.333c0,1.759.951,3.188,2.127,3.188s2.127-1.426,2.127-3.188-.951-3.188-2.127-3.188S31.25,118.066,31.25,119.828Zm-12.75,0c0,1.759.951,3.188,2.127,3.188s2.127-1.426,2.127-3.188-.951-3.188-2.127-3.188S18.5,118.066,18.5,119.828Z" transform="translate(-10 -101.754)"/></svg></a></div><p>Follow along with <strong>Ben</strong> for the fun, for the whimsy, and for the love of building websites ♥ </p></div></div></footer></div></body>
          <script src="../../__main.mjs" defer></script>
          
          
<!-- Mirrored from bholmes.dev/blog/a-neat-diy-solution-to-animating-on-scroll-for-any-framework/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 16 Mar 2022 05:59:00 GMT -->
</html>