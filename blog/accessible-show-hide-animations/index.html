<!DOCTYPE html><html lang="en-US">
<!-- Mirrored from bholmes.dev/blog/accessible-show-hide-animations/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 16 Mar 2022 05:56:47 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head><link rel="stylesheet" href="__styles.html"><link rel="stylesheet" href=../../_layouts/__styles.css><link rel="stylesheet" href=../../_layouts/blog-post/__styles.css><title>Sexy, accessible show-hide animations in any web framework</title><link rel="preload" href="https://use.typekit.net/liz3dnm.css" as="style"/><link rel="preload" href="../../assets/fonts/Atkinson/Atkinson-Hyperlegible-Regular.woff2" as="font" crossorigin="anonymous"/><link rel="preload" href="../../assets/fonts/Atkinson/Atkinson-Hyperlegible-Bold.woff2" as="font" crossorigin="anonymous"/><link rel="preload" href="../../assets/fonts/Atkinson/Atkinson-Hyperlegible-Italic.woff2" as="font" crossorigin="anonymous"/><link rel="preload" href="../../assets/fonts/Atkinson/Atkinson-Hyperlegible-BoldItalic.woff2" as="font" crossorigin="anonymous"/><link rel="stylesheet" href="https://use.typekit.net/liz3dnm.css"/><link rel="icon" type="img/jpg" href="../../assets/favicon.jpg"/><link rel="canonical" href="index.html"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><!-- TODO: automatically generate these at buildtime--><link rel="modulepreload" href="__client.html"/><link rel="modulepreload" href="__data.html"/><link rel="modulepreload" href="../../_layouts/__client.mjs"/><link rel="modulepreload" href="../../_layouts/__data.mjs"/><link rel="preload" as="fetch" href="../../index-2.html"/><link rel="preload" as="fetch" href="../../work/index.html"/><link rel="preload" as="fetch" href="../../contact/index.html"/><meta name="author" content="Ben Holmes"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@bholmesdev"/><meta name="twitter:creator" content="@bholmesdev"/><meta name="description" content="It's easy to build fancy fade transitions, but how do we include keyboard-ists and screenreaders in the mix?"/><meta property="og:url" content="index.html"/><meta property="og:image" content="../../assets/blog/show-hide-animation/thumbnail.png"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:site_name" content="Ben Holmes"/><meta property="og:title" content="Sexy, accessible show-hide animations in any web framework"/><meta property="og:description" content="It's easy to build fancy fade transitions, but how do we include keyboard-ists and screenreaders in the mix?"/><!-- Analytics--><script async="async" defer="defer" data-domain="bholmes.dev" src="https://stats.bholmes.dev/js/index.js"></script></head><body><div id="loading-spinner" aria-label="loading"><div class="loading-spinner__graphic"><div class="loading-spinner__graphic--dash"></div><div class="loading-spinner__graphic--dash"></div><div class="loading-spinner__graphic--dash"></div></div></div><nav id="site-navigation"><div class="jump-to-section__container"><button id="jump-to-section__toggle" aria-label="Reveal table of contents"><span>0</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M128 192l128 128 128-128z"/></svg></button><div class="jump-to-section__label-container"><p id="jump-to-section__label"></p></div><ul id="jump-to-section__links"></ul></div><div class="primary-nav__container"><ul id="primary-nav__links"><li><a href="../../index.html">Ben</a></li><li><a class="active" href="../index.html">Blog</a></li><li><a href="../../work/index-2.html">Works</a></li><li><a href="../../contact/index-2.html">Contact</a></li></ul><button id="primary-nav__toggle" aria-label="Reveal navigation links"><div class="stripe-top"></div><div class="stripe-middle"></div><div class="stripe-bottom"></div></button></div></nav><div id="loading-spinner" aria-label="loading"><div class="loading-spinner__graphic"><div class="loading-spinner__graphic--dash"></div><div class="loading-spinner__graphic--dash"></div><div class="loading-spinner__graphic--dash"></div></div></div><div data-page="_layouts/blog-post"><main><article data-page="blog/accessible-show-hide-animations"><header><picture><source type="image/webp" srcset="/assets/pug-images/eae87e81-600.webp 600w, /assets/pug-images/eae87e81-800.webp 800w, /assets/pug-images/eae87e81-1400.webp 1400w" sizes="(min-width: 800px) 720px, 100vw"><source type="image/jpeg" srcset="/assets/pug-images/eae87e81-600.jpeg 600w, /assets/pug-images/eae87e81-800.jpeg 800w, /assets/pug-images/eae87e81-1400.jpeg 1400w" sizes="(min-width: 800px) 720px, 100vw"><img alt="It's easy to build fancy fade transitions, but how do we include keyboard-ists and screenreaders in the mix?" loading="lazy" decoding="async" widths="800,1000,1400" src="../../assets/pug-images/eae87e81-600.jpg" width="1400" height="587"></picture><h1>Sexy, accessible show-hide animations in any web framework</h1><p class="details"><span><strong>7</strong> minute read</span><span class="spacer">‚Ä¢</span><span>Last updated <time pubdate="pubdate" datetime="2021-05-24T20:01:36.550Z">May 24, 2021</time></span></p></header><div><p>This entry comes from my web wizardry newsletter, where I explore evergreen solutions to common web dev problems (no matter your favorite framework). If you like what you see, <a href="http://tinyletter.com/bholmesdev" target="_blank" rel="noreferrer"><strong>go sign up for free</strong></a> ü™Ñ</p>
<hr>
<p>Using JS to show and hide something is a web dev rite of passage. Heck, it's the first demo that comes to mind when you think about &quot;state management&quot; (just behind building a counter üòÜ).</p>
<p>But when you do the classic &quot;hide whenever X variable is <code>false</code>,&quot; there's some accessibility concerns you might be forgetting:</p>
<ul>
<li>can keyboard users still access that hidden element?</li>
<li>do screen readers actually <em>know</em> what your button is trying to show and hide?</li>
</ul>
<p>Don't worry, I have the answers for you! Let's explore a universal solution you can bring to React, Svelte, Vue, etc, along with some debugging tips using a real screen reader üöÄ</p>
<h2 id="link-starting-with-a-naive-solution">Starting with a naive solution</h2>
<p>Okay, wait, why isn't this post a 2 minute read? I just whipped up this fade transition in a CodePen and it works great!</p>
<p class="codepen" data-height="400" data-theme-id="light" data-default-tab="css,result" data-user="bholmesdev" data-slug-hash="XWMKqWj" style="height: 400px; text-align: center" data-pen-title="Detect current section">
<span><a href="https://codepen.io/bholmesdev/pen/XWMKqWj">See the Pen</a> by Benjamin Holmes (<a href="https://codepen.io/bholmesdev">@bholmesdev</a>)
  on <a href="https://codepen.io/">CodePen</a>.</span>
</p>
<p><em>If you don't recognize this meme, <a href="https://knowyourmeme.com/memes/nileseyy-niles-disappears" target="_blank" rel="noreferrer">go culture yourself</a></em></p>
<p>I'll admit that a simple <code>opacity</code> shift works pretty well for non-interactable elements like this <code>img</code>. But what if you're <strong>showing and hiding clickable elements,</strong> like a navigation bar of links?</p>
<p>This can spell problems for those using keyboard navigation or screenreaders. It's (embarrassingly) a problem across some of my own sites that I'm working to fix, but it can be tricky to debug.</p>
<p>Here's an example of hitting the <code>tab</code> key through our <a href="https://hack4impact.org/" target="_blank" rel="noreferrer">Hack4Impact.org</a> site. I've adjusted the dropdown overlay to <code>opacity: 0.1</code> to show which items are focused, but you can expect the same behavior for <code>opacity: 0</code>:</p>
<p><img src="../../assets/blog/show-hide-animation/show-hide-tab-focus-demo.gif" alt="When hitting toggling the hamburger menu off on the Hack4Impact site, we see a faint focus ring over each link as we tab to these low opacity elements" loading="lazy"  /></p>
<p><em>Follow either the focus ring around the elements, or the <code>activeElement</code> query in the console view (which prints the element being focused)</em></p>
<p>Uh oh, I'm still able to focus and select these links! What's more, our <code>opacity</code> solution poses a problem for visually impaired users, since they won't know that our visual <code>opacity</code> shift <em>really</em> means showing and hiding a dropdown.</p>
<p>What we really want is the best of <em>all</em> worlds:</p>
<ol>
<li>A nifty fade in-and-out animation for sighted users</li>
<li>The ability to focus interactable links and buttons <em>only</em> when the element is revealed</li>
<li>A callout for screenreaders whenever we show and hide something</li>
</ol>
<h2 id="link-lets-accommodate-keyboard-users">‚å®Ô∏è Let's accommodate keyboard users</h2>
<p><em><strong>Note:</strong> This section only applies when showing / hiding interactable elements like a list of links.</em></p>
<p>Focusing on that <code>tab</code> key first, we need to find a way to make sure that a not-so-visible element can't be accessed at all.</p>
<p>You might remember a nifty property for this already: <code>display: none</code>. This makes element nonexistent in the document, right?</p>
<p>Well it's worth a shot! Let's toggle to <code>display: none</code> when our element is hidden, and add <code>display</code> alongside <code>opacity</code> in our list of transitions.</p>
<p>We'll be using this basic navigation dropdown as fuel for the rest of our code examples. Nothing fancy on the JS + HTML sides! The important piece are those <code>.dropdown</code> and <code>.dropdown.expanded</code> selectors in our CSS. That's where we toggle between our <code>display</code> states like so:</p>
<pre class="language-css"><code class="language-css"><span class="token selector">.dropdown</span> <span class="token punctuation">{</span>
	<span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
	<span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.dropdown.expanded</span> <span class="token punctuation">{</span>
	<span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
	<span class="token comment">/* since we're using flexbox in our dropdown */</span>
	<span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
	<span class="token comment">/* to (hopefully) fade from expanded to collapsed in 0.2 seconds */</span>
	<span class="token property">transition</span><span class="token punctuation">:</span> opacity 0.2s<span class="token punctuation">,</span> <span class="token property">display</span><span class="token punctuation">:</span> 0.2s<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>Full example:</strong></p>
<p class="codepen" data-height="400" data-theme-id="light" data-default-tab="css,result" data-user="bholmesdev" data-slug-hash="BaWzGpY" style="height: 400px; text-align: center" data-pen-title="Detect current section">
<span><a href="https://codepen.io/bholmesdev/pen/BaWzGpY">See the Pen</a> by Benjamin Holmes (<a href="https://codepen.io/bholmesdev">@bholmesdev</a>)
  on <a href="https://codepen.io/">CodePen</a>.</span>
</p>
<p>But wait, where's our fade transition? Sorry to say this is the big limitation of the <code>display</code> property: <strong>it cannot be used in CSS transitions</strong> ( <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_animated_properties" target="_blank" rel="noreferrer">full list of animatable CSS properties here</a>) This means, when we toggle off our <code>expanded</code> class, it immediately switches to <code>display: none</code> (ignoring our <code>0.2s</code> transition) before our opacity has time to sexily fade out üò•</p>
<p>What we need is a way to toggle off <code>display</code> <em>only after</em> our element fades out of view. And no, we can't use <code>keyframes</code> to set up this sequence (<a href="https://gist.github.com/Holben888/45fa3c0c5ea7bf0e2ef74b882a2e2522" target="_blank" rel="noreferrer">here's the code you were probably about the try</a> üòâ). But fear not! There's a neat property called <code>visibility</code> that can do exactly what we want. Just hot swap <code>display: none</code> for <code>visibility: hidden</code> and update the transition:</p>
<p class="codepen" data-height="400" data-theme-id="light" data-default-tab="css,result" data-user="bholmesdev" data-slug-hash="xxqOQrw" style="height: 400px; text-align: center" data-pen-title="Detect current section">
<span><a href="https://codepen.io/bholmesdev/pen/xxqOQrw">See the Pen</a> by Benjamin Holmes (<a href="https://codepen.io/bholmesdev">@bholmesdev</a>)
  on <a href="https://codepen.io/">CodePen</a>.</span>
</p>
<p>And <em>BAM!</em> Our fade animation remains in-tact, but we've successfully hidden our element from keyboard-ists üëç</p>
<p>You can click on that CodePen preview above and start hitting <code>tab</code> to test our solution. Your focus should immediately jump from the hamburger button to the CodePen zoom controls, instead of trying to focus those invisible links. And once you focus the button, hit <code>space</code>, and start <code>tab</code>ing through, those links become selectable.</p>
<p>üí° <em><strong>Note:</strong> There is 1 subtle difference between <code>display: none</code> and <code>visibility: hidden</code>. When using the former, an element gets completely removed from the document, so any elements next to it will <strong>shift to take up the space it left behind.</strong> By contrast, <code>visibility: hidden</code> just hides the element visually, while <strong>leaving the gap</strong> for where it used to sit. This prevents your website layout from shifting around when you toggle elements on and off.</em></p>
<h2 id="link-lets-accommodate-screen-readers">üëÅ Let's accommodate screen readers</h2>
<p>Okay, so we know what our website looks like... but what does it sound like? ü§î</p>
<p>Well, I'd recommend breaking out a screen reader for this next part! You can reach for the VoiceOver tool if you're running MacOS, but there's also a <a href="https://chrome.google.com/webstore/detail/screen-reader/kgejglhpjiefppelpmljglcjbhoiplfn" target="_blank" rel="noreferrer">screen reader for Chrome</a> you can try on any computer.</p>
<p>If you're interested, you can follow along with this video walkthrough to see the <a href="https://support.apple.com/guide/voiceover-guide/welcome/web" target="_blank" rel="noreferrer">VoiceOver tool</a> in action üëá</p>
<iframe width="375" height="300" src="https://www.youtube-nocookie.com/embed/21S1PFBxV6g"
          title="YouTube video player" frameborder="0" data-embed-type="youtube"
          allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen></iframe>
<h3 id="link-communicating-toggle-states-with-aria-expanded">Communicating toggle states with <code>aria-expanded</code></h3>
<p>Our navigation toggle button is the first issue to address. If you try expanding and collapsing our menu as-is, the screenreader won't read anything <em>new</em> to the user. This is because, well, it's a plain old button at the moment. We need to tell our reader that it's <em>actually</em> an on-off toggle.</p>
<p>We can pull this off by adding an <code>aria-expanded</code> attribute to our button. This boolean should call out whether our menu is in the &quot;expanded&quot; or &quot;collapsed&quot; state. Just set the initial state in our HTML:</p>
<pre class="language-html"><code class="language-html"><span class="token comment">&lt;!-- collapsed by default --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">aria-expanded</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token attr-name">aria-label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Nav toggle<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>toggle-dropdown<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
</code></pre>
<p>And keep that value up-to-date wherever we're tracking button clicks. Here's a basic version for plain-JS:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> toggle <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".toggle-dropdown"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
toggle<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// toggle our CSS class</span>
  dropdown<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token string">"expanded"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// and if our "expanded" class is turned on...</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>dropdown<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"expanded"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// set aria-expanded to true</span>
    toggle<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"aria-expanded"</span><span class="token punctuation">,</span> <span class="token string">"true"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
	<span class="token comment">// otherwise it's false</span>
    toggle<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"aria-expanded"</span><span class="token punctuation">,</span> <span class="token string">"false"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p class="codepen" data-height="400" data-theme-id="light" data-default-tab="js,result" data-user="bholmesdev" data-slug-hash="RwpVqdb" style="height: 400px; text-align: center" data-pen-title="Detect current section">
<span><a href="https://codepen.io/bholmesdev/pen/RwpVqdb">See the Pen</a> by Benjamin Holmes (<a href="https://codepen.io/bholmesdev">@bholmesdev</a>)
  on <a href="https://codepen.io/">CodePen</a>.</span>
</p>
<p><img src="../../assets/blog/show-hide-animation/aria-expanded-screenreader-demo.gif" alt="VoiceOver output as we toggle our button. Notice we get a new announcement for every click saying either "expanded" or "collapsed"" loading="lazy"  /></p>
<p><em>VoiceOver output as we toggle our button. Notice we get a new announcement for every click saying either &quot;expanded&quot; or &quot;collapsed&quot;</em></p>
<p>You can also add the attribute <code>aria-haspopup=&quot;true&quot;</code> to your button. This will just added the word &quot;popup&quot; to the screenreader output to make behavior just a bit more understandable. Optional, but recommended!</p>
<h3 id="link-focusing-our-dropdown-on-expanded">Focusing our dropdown on expanded</h3>
<p><em><strong>Note:</strong> This should only be used when showing / hiding interactable elements. If you're just revealing images or paragraphs, the <code>aria-expanded</code> piece should be sufficient!</em></p>
<p>So now we're telling the user that they're expanding and collapsing something. But what is this <em>something</em> their actually toggling?</p>
<p>Sadly, there's no straightforward way to tell the user &quot;you just expanded my fancy dropdown!&quot; There <em>is</em> an <code>aria-controls</code> attribute you can try, but it's only supported by the premium <a href="https://www.freedomscientific.com/products/software/jaws/" target="_blank" rel="noreferrer">JAWS screen reader</a> (which many users don't have access to).</p>
<p>So, we're going to offer the next best thing: just focus the first element in our dropdown to read out the contents immediately. This means shifting keyboard focus (yes, visually impaired users tend to navigate navigate using a keyboard) from our menu button to our first link whenever <code>aria-expanded=&quot;true&quot;</code>. Of course, this only applies when revealing interactable elements like buttons or links, so it should</p>
<p>Should be simple enough! Just add a call to <code>focus()</code> whenever we expand the element, right?</p>
<pre class="language-js"><code class="language-js">toggle<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>dropdown<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"expanded"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// use firstElementChild to grab the first link</span>
	dropdown<span class="token punctuation">.</span>firstElementChild<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    toggle<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"aria-expanded"</span><span class="token punctuation">,</span> <span class="token string">"true"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
	  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Well, this doesn't work super reliably when we have our fancy CSS transition. There's a chance we'll try to focus the first link while <code>visibility</code> is still <code>hidden</code>, which prevents our <code>focus()</code> call from going through üòï</p>
<p>Luckily, there's an easy way to &quot;wait&quot; on our CSS transition to finish before setting focus. We just need to listen for the <code>transitionend</code> event on our dropdown like so:</p>
<pre class="language-js"><code class="language-js">dropdown<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'transitionend'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>dropdown<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"expanded"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// instead of calling focus() in our 'click' listener,</span>
	<span class="token comment">// we'll call it from here!</span>
    dropdown<span class="token punctuation">.</span>firstElementChild<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>With this in place, we should get reliable link focusing with a matching screen reader output üëç</p>
<p><img src="../../assets/blog/show-hide-animation/show-hide-focus-first-link.gif" alt="VoiceOver output from hitting the toggle button. We see "Nav toggle, menu pop up collapsed, button" when expanded is false, and "Nav toggle, menu pop up expanded, button" when expanded is true" loading="lazy"  /></p>
<p><strong>Finished product</strong></p>
<p class="codepen" data-height="400" data-theme-id="light" data-default-tab="result,js" data-user="bholmesdev" data-slug-hash="vYxKVgB" style="height: 400px; text-align: center" data-pen-title="Detect current section">
<span><a href="https://codepen.io/bholmesdev/pen/vYxKVgB">See the Pen</a> by Benjamin Holmes (<a href="https://codepen.io/bholmesdev">@bholmesdev</a>)
  on <a href="https://codepen.io/">CodePen</a>.</span>
</p>
<h2 id="link-applying-this-to-your-favorite-framework">‚öôÔ∏è Applying this to your favorite framework</h2>
<p>We've covered a lot of ground using plain JS, but it's quick-and-easy to apply to any component framework!</p>
<p>We just need a couple pieces:</p>
<ul>
<li><strong>an <code>expanded</code> state variable</strong> to keep track of showing / hiding</li>
<li><strong>a callback to <code>focus()</code> our first dropdown element on <code>transitionend</code>.</strong> For most frameworks, we can just attach a callback function to an element's <code>onTransitionEnd</code> attribute.</li>
</ul>
<h3 id="link-a-simple-react-solution">A simple React solution</h3>
<pre class="language-jsx"><code class="language-jsx"><span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">DropdownExample</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>expanded<span class="token punctuation">,</span> setExpanded<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">focusFirstDropdownLink</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> target <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
	<span class="token comment">// if we apply this function to our dropdown,</span>
	<span class="token comment">// the "target" should be a reference to the dropdown itself!</span>
    target<span class="token punctuation">.</span>firstElementChild<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span>
          <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>toggle-dropdown<span class="token punctuation">"</span></span>
          <span class="token attr-name">aria-expanded</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>expanded<span class="token punctuation">}</span></span>
          <span class="token attr-name">aria-haspopup</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
          <span class="token attr-name">aria-label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Nav toggle<span class="token punctuation">"</span></span>
          <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setExpanded</span><span class="token punctuation">(</span><span class="token operator">!</span>expanded<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
        <span class="token punctuation">></span></span><span class="token plain-text">
          ...
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">></span></span><span class="token plain-text">

      &lt;div
		</span><span class="token punctuation">{</span><span class="token comment">/*toggle our "expanded" CSS class*/</span><span class="token punctuation">}</span><span class="token plain-text">
        className=</span><span class="token punctuation">{</span>expanded <span class="token operator">?</span> <span class="token string">"dropdown expanded"</span> <span class="token operator">:</span> <span class="token string">"dropdown"</span><span class="token punctuation">}</span><span class="token plain-text">
		</span><span class="token punctuation">{</span><span class="token comment">/*trigger our focus() once the dropdown's fade effect finishes*/</span><span class="token punctuation">}</span><span class="token plain-text">
        onTransitionEnd=</span><span class="token punctuation">{</span>focusFirstDropdownLink<span class="token punctuation">}</span><span class="token plain-text">
      >
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">Home</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/about<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">About</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/projects<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">Projects</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/contact<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">Contact</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Pretty straightforward rewrite! The ability to bind our <code>focus()</code> function to the <code>onTransitionEnd</code> listener saves us a lot of work. We don't even need a <code>useRef</code> to grab the element, in fact.</p>
<p>Here's a <a href="https://codesandbox.io/s/accessible-show-hide-react-4rv7m?file=/src/App.js" target="_blank" rel="noreferrer"><strong>working sandbox demo</strong></a> for you to try üöÄ</p>
<h3 id="link-svelte-example">Svelte example</h3>
<p>This should be equally trivial in Svelte:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">	
	<span class="token keyword">let</span> expanded <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	
	<span class="token keyword">const</span> <span class="token function-variable function">focusFirstDropdownLink</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> target <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
	    <span class="token comment">// again, "target" should be a reference to our dropdown</span>
		target<span class="token punctuation">.</span>firstElementChild<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
...
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span><span class="token punctuation">></span></span>
	&lt;button class="toggle-dropdown" aria-expanded={expanded} aria-haspopup="true" aria-label="Nav toggle" on:click={() => expanded = !expanded}>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">viewBox</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0 0 448 512<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100<span class="token punctuation">"</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bars<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span> <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">></span></span>

<span class="token comment">&lt;!--Note we can use class:expanded to bind our "expanded" CSS class to the "expanded" state variable--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dropdown<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">class:</span>expanded</span> <span class="token attr-name"><span class="token namespace">on:</span>transitionend</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{focusFirstDropdownLink}</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/about<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>About<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/projects<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Projects<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/contact<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Contact<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
</code></pre>
<p>Here's another <a href="https://svelte.dev/repl/daa482983cd84a199f34895cdd3a08f6?version=3.38.2" target="_blank" rel="noreferrer"><strong>working sandbox demo</strong></a> for you to try üöÄ</p>
</div><hr/><footer><p>Learn a little something? <strong><a href="https://twitter.com/intent/tweet?text=Woah,%20I%20learned%20so%20much%20from%20this!%20%22Sexy,%20accessible%20show-hide%20animations%20in%20any%20web%20framework%22%20by%20@bholmesdev%20https://bholmes.dev/blog/accessible-show-hide-animations/" target="_blank" rel="noreferrer">Share this post</a> on Twitter!</strong></p><section class="about-the-author"><img src="../../assets/images/me.jpg" alt="Hand drawn portrait of Ben Holmes"/><div><address><a rel="author" href="../../index.html">Ben Holmes </a></address>is a web developer + UI designer by trade from Charleston SC. He's been tinkering with JavaScript and CSS since 2014, and has lead a <a href="https://hack4impact.org/dev-bootcamp">full stack bootcamp curriculum</a> used by universities across the country. Now, he's working fulltime at Peloton and teaching the world a bit of web whimsy in his spare time.</div></section></footer></article></main><footer><div class="content"><div class="newsletter"><h2>Woah, there's a newsletter too!</h2><form action="https://tinyletter.com/bholmesdev" method="post" target="_blank"><label for="email">Email</label><input id="email" type="email" name="email" placeholder="10xengineer@genius.club" required="required"/><p class="newsletter__never-spam">Don't worry, I won't spam you</p><button class="cta-link" type="submit">Yes please, more content<svg xmlns="http://www.w3.org/2000/svg" fill="#5f4b32" width="34" height="34" viewBox="0 0 512 512"><path d="M48 270.9l118.9 44.6L181.7 464 256 360l104 104L464 48 48 270.9zm294.9 126L260 313.4 374.9 152 193.6 289.8 124.9 265l291-156.2-73 288.1z"/></svg></svg></button></form></div><div class="socials"><div class="socials__links"><a href="https://dev.to/bholmesdev" target="_blank" rel="noreferrer" aria-label="Ben's DEV.to blog"><svg xmlns="http://www.w3.org/2000/svg" fill="#5f4b32" width="34" height="34" viewBox="0 0 34 34"><path d="M18.119,22.38a1.48,1.48,0,0,0-.881-.33H15.917v7.929h1.321a1.449,1.449,0,0,0,.881-.33,1.172,1.172,0,0,0,.44-.991V23.371a1.172,1.172,0,0,0-.44-.991ZM39.669,9H12.331A3.332,3.332,0,0,0,9,12.324V39.676A3.332,3.332,0,0,0,12.331,43H39.669A3.332,3.332,0,0,0,43,39.676V12.324A3.332,3.332,0,0,0,39.669,9ZM20.7,28.67a3.466,3.466,0,0,1-3.668,3.586H13.508V19.7H17.1a3.462,3.462,0,0,1,3.593,3.586L20.7,28.67Zm7.647-6.731H24.3v2.918h2.471V27.1H24.3v2.918h4.047v2.244H23.626a1.531,1.531,0,0,1-1.569-1.494v-9.5A1.531,1.531,0,0,1,23.55,19.7h4.8v2.237Zm7.86,8.755c-1,2.333-2.794,1.872-3.6,0L29.682,19.7h2.471l2.257,8.631L36.654,19.7h2.471L36.207,30.694Z" transform="translate(-9 -9)"/></svg></a><a href="https://twitter.com/bholmesdev" target="_blank" rel="noreferrer" aria-label="Ben's Twitter"><svg xmlns="http://www.w3.org/2000/svg" fill="#5f4b32" width="34" height="34" viewBox="0 0 34 34"><path d="M55.383,67.4a14.634,14.634,0,0,1-4.157,1.144,7.264,7.264,0,0,0,3.185-4.008,14.384,14.384,0,0,1-4.6,1.757,7.237,7.237,0,0,0-12.524,4.95,7.087,7.087,0,0,0,.187,1.652,20.514,20.514,0,0,1-14.924-7.574A7.253,7.253,0,0,0,24.8,75a7.07,7.07,0,0,1-3.29-.9v.09a7.245,7.245,0,0,0,5.809,7.1,7.287,7.287,0,0,1-1.907.254,6.829,6.829,0,0,1-1.361-.135,7.25,7.25,0,0,0,6.766,5.032,14.513,14.513,0,0,1-8.995,3.1,14.673,14.673,0,0,1-1.727-.1,20.234,20.234,0,0,0,11.081,3.275c13.331,0,20.613-11.043,20.613-20.621,0-.314-.007-.628-.022-.935A14.736,14.736,0,0,0,55.383,67.4Z" transform="translate(-20.1 -64)"/></svg></a><a href="https://github.com/holben888" target="_blank" rel="noreferrer" aria-label="Ben's GitHub"><svg xmlns="http://www.w3.org/2000/svg" fill="#5f4b32" width="34" height="34" viewBox="0 0 34 34"><path d="M10,115.987a18.6,18.6,0,0,0,.434,4.181,12.443,12.443,0,0,0,1.2,3.251,9.207,9.207,0,0,0,1.943,2.429,11.2,11.2,0,0,0,2.56,1.714,15.1,15.1,0,0,0,3.15,1.079,26,26,0,0,0,3.615.583q1.847.167,4.056.167,2.227,0,4.073-.167a26.227,26.227,0,0,0,3.626-.583,15.681,15.681,0,0,0,3.168-1.079,11.191,11.191,0,0,0,2.578-1.714,9.284,9.284,0,0,0,1.964-2.429,12.2,12.2,0,0,0,1.2-3.251A18.6,18.6,0,0,0,44,115.987a10.2,10.2,0,0,0-2.758-7.133,8.923,8.923,0,0,0,.274-.906,12.4,12.4,0,0,0,.232-1.447,8.1,8.1,0,0,0-.083-2.168,11.516,11.516,0,0,0-.708-2.512l-.25-.049a3.352,3.352,0,0,0-.874.024,9.708,9.708,0,0,0-1.412.3,12.073,12.073,0,0,0-2.078.864,24.135,24.135,0,0,0-2.685,1.6,26.284,26.284,0,0,0-6.668-.666,26.208,26.208,0,0,0-6.651.666,22.6,22.6,0,0,0-2.7-1.6,13.381,13.381,0,0,0-2.054-.864,8.05,8.05,0,0,0-1.429-.291,4.676,4.676,0,0,0-.84-.042,1.455,1.455,0,0,0-.274.059,11.462,11.462,0,0,0-.708,2.512,8.1,8.1,0,0,0-.083,2.168,12.664,12.664,0,0,0,.232,1.447,8.922,8.922,0,0,0,.274.906A10.223,10.223,0,0,0,10,115.987Zm4.174,4.174a5.879,5.879,0,0,1,2.179-4.389,4.334,4.334,0,0,1,1.513-.906,6.575,6.575,0,0,1,1.953-.347c.725-.028,1.422-.021,2.085.017s1.485.09,2.46.156,1.818.1,2.526.1,1.551-.031,2.529-.1,1.8-.118,2.46-.156,1.36-.045,2.085-.017a6.687,6.687,0,0,1,1.953.347,4.366,4.366,0,0,1,1.513.906,5.814,5.814,0,0,1,2.179,4.389,8.215,8.215,0,0,1-.357,2.536,6.367,6.367,0,0,1-.912,1.853,4.535,4.535,0,0,1-1.547,1.273,10.782,10.782,0,0,1-1.929.8,13.909,13.909,0,0,1-2.411.441c-.982.1-1.856.17-2.626.191s-1.749.035-2.935.035-2.165-.01-2.935-.035-1.644-.087-2.626-.191a13.648,13.648,0,0,1-2.411-.441,11.153,11.153,0,0,1-1.929-.8,4.535,4.535,0,0,1-1.547-1.273,6.414,6.414,0,0,1-.916-1.853A8.438,8.438,0,0,1,14.174,120.161Zm17.076-.333c0,1.759.951,3.188,2.127,3.188s2.127-1.426,2.127-3.188-.951-3.188-2.127-3.188S31.25,118.066,31.25,119.828Zm-12.75,0c0,1.759.951,3.188,2.127,3.188s2.127-1.426,2.127-3.188-.951-3.188-2.127-3.188S18.5,118.066,18.5,119.828Z" transform="translate(-10 -101.754)"/></svg></a></div><p>Follow along with <strong>Ben</strong> for the fun, for the whimsy, and for the love of building websites ‚ô• </p></div></div></footer></div></body>
          <script src="../../__main.mjs" defer></script>
          
          
<!-- Mirrored from bholmes.dev/blog/accessible-show-hide-animations/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 16 Mar 2022 05:56:55 GMT -->
</html>